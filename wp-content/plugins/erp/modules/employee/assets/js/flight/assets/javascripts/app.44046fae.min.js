!function(window,$jQ){var via=function(){function define(name,fun){var obj=exportPath(name),exports=fun();for(var propertyName in exports){var propertyDescriptor=Object.getOwnPropertyDescriptor(exports,propertyName);propertyDescriptor&&Object.defineProperty(obj,propertyName,propertyDescriptor)}}function exportPath(name,opt_object,opt_objectToExportTo){for(var part,parts=name.split("."),cur=opt_objectToExportTo||window;parts.length&&(part=parts.shift());)parts.length||void 0===opt_object?cur=part in cur?cur[part]:cur[part]={}:cur[part]=opt_object;return cur}document,/Mac/.test(navigator.platform),/Win/.test(navigator.platform),/CrOS/.test(navigator.userAgent),/Linux/.test(navigator.userAgent);return{define:define}}();window.via=via;var jq=$jQ({});$jQ.each({trigger:"publish",on:"subscribe",off:"unsubscribe"},function(key,val){$jQ[val]=function(){jq[key].apply(jq,arguments)}}),via.define("via.ui",function(){function ModalPanel(){this.initialize()}return ModalPanel.prototype={initialize:function(){this.cacheElements(),this.bindEvents(),this.subscribe()},cacheElements:function(){this.template=_.template($jQ("#modal").html(),{}),this.waitDivTemplate=_.template($jQ("#waitDiv").html(),{}),this.waitTemplate=_.template($jQ("#wait").html(),{}),this.showAlertTemplate=_.template($jQ("#showAlert").html(),{}),this.$Container=$jQ("#modal-container"),this.defaults={close:!0,backdrop:"static",keyboard:!1,data:{},title:"",size:"md",closeText:"Close",submitText:"Ok",controls:!0,isWaitDiv:!1,waitDiv:{template:this.waitDivTemplate},isWait:!1,wait:{template:this.waitTemplate},isShowAlert:!1,showAlert:{template:this.showAlertTemplate},template:null,submitHandler:null,cancelHandler:null,renderEvent:null}},bindEvents:function(){this.$Container.on("hidden.bs.modal","#modalPanel",this.hide.bind(this)),this.$Container.on("shown.bs.modal","#modalPanel",this.renderEvent.bind(this)),this.$Container.on("click","#modalPanel .done",this.done.bind(this))},subscribe:function(){var _this=this;$jQ.subscribe("MODAL_PANEL/show",function(e,options){_this.opts=$jQ.extend({},_this.defaults,options||{}),_this.show()}),$jQ.subscribe("MODAL_PANEL/hide",function(e,data){_this.hide()})},show:function(){this.opts.isWaitDiv?this.opts.template=this.opts.waitDiv.template:this.opts.isWait?this.opts.template=this.opts.wait.template:this.opts.isShowAlert&&(this.opts.template=this.opts.showAlert.template),this.$Container.html(this.template({options:this.opts})).find("#modalPanel").modal(this.opts)},hide:function(e){this.$Container.find("#modalPanel").modal("hide")},done:function(e){this.opts.submitHandler?$jQ.publish(this.opts.submitHandler,{}):this.hide()},renderEvent:function(e){this.opts.renderEvent&&$jQ.publish(this.opts.renderEvent,{})}},{Modal:ModalPanel}}),via.define("via.ui",function(){function PageLoader(){this.defaults={loadVal:0},this.initialize()}return PageLoader.prototype={initialize:function(){this.cacheElements(),this.subscribe()},cacheElements:function(){this.$progressEle='<div class="progress page-loader"> <div class="progress-bar progress-bar-danger progress-bar-striped active" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%"><span class="sr-only">0% Complete</span></div></div>'},subscribe:function(){var _this=this;$jQ.subscribe("PAGE_LOADER/start",function(e,data){_this.opts=$jQ.extend({},_this.defaults,data.options||{}),_this.start()}),$jQ.subscribe("PAGE_LOADER/end",function(e,data){_this.end()})},start:function(){var _this=this;$jQ("body").prepend(this.$progressEle),this.progressRepeator=setInterval(function(){_this.defaults.loadVal+=5,$jQ("body").find(".page-loader .progress-bar").width(_this.defaults.loadVal+"%")},300)},end:function(){var _this=this;clearInterval(_this.progressRepeator),$jQ("body").find(".page-loader .progress-bar").width("100%"),setTimeout(function(){$jQ("body").find(".page-loader").hide()},500)}},{pageLoader:new PageLoader}}),via.define("via.ui",function(){function AjaxUtil(){this.defaults={type:"POST",params:"",argument:[],timeout:2e4,form:null,servlet:"bdo",error:{handler:null,parseMsg:!0,msg:"Error while processing your request. Please try again later.",inDialog:!0,title:"Error",divElOps:null},success:{handler:null,parseMsg:!1,msg:"",inDialog:!1,title:"Success",divElOps:null},wait:{handler:null,show:!0,inDialog:!0,blkEl:null,msg:"Please wait ...",timeout:null,divEl:null,divElOps:null},dataType:"json",escapeElements:[],headers:{"cache-control":"no-cache"}},this.subscribe()}return AjaxUtil.prototype={subscribe:function(){var _this=this;$jQ.subscribe("AJAX_UTIL/asyncCall",function(e,options){_this.opts=$jQ.extend({},_this.defaults,options||{}),_this.asyncCall()})},parseXMLMsg:function(xml,tag,defaultMsg){var xml=$jQ(tag,xml);if(xml.length>0){var msg=$jQ(xml).text();if(msg)return msg}return defaultMsg},asyncCall:function(){var opts=this.opts,servlet=opts.servlet,prms=opts.form?$jQ("#"+opts.form).serialize()+opts.params:opts.params,completeFn=function(jqXHR,sts){"success"==sts?this.handleAsyncSuccess(jqXHR,opts):this.handleAsyncError(jqXHR,opts)},ajaxOpts={type:opts.type,timeout:opts.timeout,cache:!1,context:this,data:prms,dataType:opts.dataType,complete:completeFn,headers:{"cache-control":"no-cache"}};ajaxOpts.headers["Via-Access-Token"]="553f5767-373f-4d98-9e6d-08fa87400a42","json"==opts.dataType&&(ajaxOpts.contentType="application/json"),$jQ.ajax("/"+servlet,ajaxOpts),opts.wait.show&&(opts.wait.inDialog?$jQ.publish("MODAL_PANEL/show",{isWait:!0}):opts.wait.divEl)},handleAsyncSuccess:function(jqXHR,opts){var successJSON=jqXHR.responseJSON;if(successJSON.err)return void this.handleAsyncError(jqXHR,opts);var successMsg=null;opts.success.parseMsg&&(successMsg=this.parseXMLMsg(jqXHR.responseJSON,"Success",opts.success.msg)),opts.wait.divEl&&this.hideWait(opts.wait.divEl,opts.success.divElOps),opts.success.inDialog&&$jQ.publish("MODAL_PANEL/show",{isShowAlert:!0,data:{message:successMsg,type:"success",curl:opts.curl,cpgnm:opts.cpgnm},title:opts.success.title}),opts.wait.handler&&opts.wait.handler.call(opts.scope,!1,!0),opts.success.handler&&$jQ.publish(opts.success.handler,{argument:opts.argument,message:successMsg,json:successJSON,response:jqXHR})},handleAsyncError:function(jqXHR,opts){var errorMsg=null,xml=$jQ("Error",jqXHR.responseJSON);return xml.length>0&&xml.attr("ovr")?(errorMsg=this.parseXMLMsg(jqXHR.responseJSON,"Error",opts.error.msg),void("1"==xml.attr("ovr")&&$jQ.publish("MODAL_PANEL/show",{isShowAlert:!0,data:{message:errorMsg,type:"error",curl:xml.attr("curl"),cpgnm:xml.attr("cpgnm")},title:"Session Expired"}))):(opts.error.parseMsg&&(errorMsg=this.parseXMLMsg(jqXHR.responseJSON,"Error",opts.error.msg)),opts.wait.divEl&&(opts.error.divElOps?this.hideWaitError(opts.wait.divEl,errorMsg,opts.error.divElOps):this.hideWait(opts.wait.divEl)),opts.wait.handler&&opts.wait.handler.call(opts.scope,!1,!1),opts.error.inDialog&&$jQ.publish("MODAL_PANEL/show",{isShowAlert:!0,data:{message:errorMsg,type:"error"},title:opts.error.title}),void(opts.error.handler&&$jQ.publish(opts.error.handler,{argument:opts.argument,message:errorMsg,response:jqXHR})))}},{ajaxUtil:new AjaxUtil}}),via.define("via.utils",function(){function duration(durMin,hrS,mnS){return Math.floor(durMin/60)+(hrS?hrS:"h")+" "+durMin%60+(mnS?mnS:"m")}function inCurrency(pr){return pr.replace(/(\d)(?=(\d\d)+\d$)/g,"$1,")}function appendScript(src){var script=document.createElement("script");script.src=src,document.getElementsByTagName("head")[0].appendChild(script)}return{duration:duration,inCurrency:inCurrency,appendScript:appendScript}}),via.define("via.date",function(){function today(){return new Date}function getDisplayDateLong(dt){return DATE_CONSTANTS.WEEKDAYS_LONG[dt.getDay()]+", "+dt.getDate()+" "+DATE_CONSTANTS.MONTHS_LONG[dt.getMonth()]+" "+dt.getFullYear()}function getDisplayDateShort(dt){return dt.getDate()+" "+DATE_CONSTANTS.MONTHS_SHORT[dt.getMonth()]}function getDisplayDate(dt){return DATE_CONSTANTS.WEEKDAYS_MEDIUM[dt.getDay()]+", "+getDisplayDateShort(dt)+" "+dt.getFullYear()}function getDisplayDateWithoutDay(dt){return getDisplayDateShort(dt)+" "+dt.getFullYear()}function addDays(dt,n){return new Date(dt.getTime()+1e3*n*60*60*24)}function getLongMonth(monthIndex){if(monthIndex<0||monthIndex>11)throw new RangeError("Month should be between 0 to 11 for getLongMonth");return DATE_CONSTANTS.MONTHS_LONG[monthIndex]}function leadingZeros(nr,num){if(parseInt(nr,10)==nr&&NaN!=parseInt(num,10)){for(;(""+nr).length<num;)nr="0"+nr;return nr}return null}function strToDateObj(_date){var _d=_date.replace(/[- :.\s]/g,",").split(",");return _d[1]-=1,_d.unshift(Date),new(Function.prototype.bind.apply(Date,_d))}function getDisplayTimefunction(tm){return leadingZeros(tm.getHours(),2)+":"+leadingZeros(tm.getMinutes(),2)}var DATE_CONSTANTS={MONTHS_SHORT:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],MONTHS_LONG:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKDAYS_1CHAR:["S","M","T","W","T","F","S"],WEEKDAYS_SHORT:["Su","Mo","Tu","We","Th","Fr","Sa"],WEEKDAYS_MEDIUM:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],WEEKDAYS_LONG:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]};return{today:today,getDisplayDateLong:getDisplayDateLong,addDays:addDays,getDisplayTimefunction:getDisplayTimefunction,strToDateObj:strToDateObj,getDisplayDate:getDisplayDate,getLongMonth:getLongMonth,getDisplayDateWithoutDay:getDisplayDateWithoutDay}}),via.define("via.dom",function(){function scrollFloatMenu(ctrD,dId,cls){var dO=$jQ(dId),cO=$jQ(ctrD),left=dO.offset().left;$jQ(window).scroll(function(){$jQ(window).scrollTop()>cO.offset().top?dO.addClass("floatM"+(cls?" "+cls:"")).css({left:left}):dO.removeClass("floatM"+(cls?" "+cls:"")).css({left:"auto"})})}return{scrollFloatMenu:scrollFloatMenu}}),via.define("via.ui",function(){function DatePick(opts){var defaults={fromInp:null,toInp:null,calO:{monthsToShow:2,changeMonth:!1,showOtherMonths:!1,selectOtherMonths:!0,minDate:new Date,dateFormat:"dd/mm/yyyy",prevText:"&#9668;",nextText:"&#9658;",showTrigger:'<a class="cal_display"></a>',showClear:!1,onSelectCB:null,onDate:null},fCalO:{},tCalO:{},onDate:{status:!1,data:[],selectable:!0,content:null,prependContent:""}};this.opts=$jQ.extend(!0,{},defaults,opts||{});var me=this;this.init=function(){me.opts.fCalO=$jQ.extend(!0,{},me.opts.calO,me.opts.fCalO),me.opts.tCalO=$jQ.extend(!0,{},me.opts.calO,me.opts.tCalO),me.setCalOpts(me.opts.fCalO),me.setCalOpts(me.opts.tCalO),me.opts.onDate.status&&(me.opts.fCalO.onDate=me.populateDayWise),me.fromIJ=$jQ(me.opts.fromInp),me.fromIJ.datepick(me.opts.fCalO),me.opts.toInp?(me.toIJ=$jQ(me.opts.toInp),me.opts.tCalO.onSelect=function(dtA){me.opts.tCalO.onSelectCB&&me.opts.tCalO.onSelectCB(me,dtA,me.toIJ)},me.toIJ.datepick(me.opts.tCalO),me.fromIJ.datepick("option",{onSelect:function(dtA){me.toIJ.datepick("option","minDate",dtA[0]||null),me.opts.fCalO.onSelectCB&&me.opts.fCalO.onSelectCB(me,dtA,me.fromIJ)}})):me.fromIJ.datepick("option",{onSelect:function(dtA){me.opts.fCalO.onSelectCB&&me.opts.fCalO.onSelectCB(me,dtA,me.fromIJ)}})},this.populateDayWise=function(date,inMonth){var data=me.opts.onDate.data,prependContent=me.opts.onDate.prependContent;if(inMonth)for(i=0;i<data.length;i++)if(date.getMonth()+1==data[i][0]&&date.getDate()==data[i][1]){var priceDiv=$jQ("<div>",{"class":"priceDiv",info:JSON.stringify(data[i])}).append('<span class="day">'+data[i][1]+'</span><div><span class="u_vsmallF">'+prependContent+' </span><span class="price">&nbsp;'+data[i][3]+"</span></div>");return me.opts.onDate.content&&priceDiv.append(me.opts.onDate.content),{content:$jQ("<div>").append(priceDiv).html()}}return me.opts.onDate.selectable?{}:{selectable:!1}},this.setCalOpts=function(calO){calO.showClear||(calO.renderer=$jQ.extend({},$jQ.datepick.defaultRenderer,{picker:$jQ.datepick.defaultRenderer.picker.replace(/\{link:clear\}/,"")}))},this.getSelectedDates=function(toCal){return toCal?me.toIJ.datepick("getDate"):me.fromIJ.datepick("getDate")},this.init()}return{DatePick:DatePick}})}(window,jQuery);