function VIA_CALENDER(element,func,calOpts){var cal=this;cal.element=element,cal.func=func,cal.days=JS_UTIL.translate("weekDaysFirstLetterArray",["S","M","T","W","T","F","S"]),cal.mon=JS_UTIL.translate("monthNamesShortArray",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sept","Oct","Nov","Dec"]),todayDate=new Date,todayYear=todayDate.getFullYear(),todayMonth=todayDate.getMonth()+1,todayDateString=todayMonth+"/"+todayDate.getDate()+"/"+todayYear,startDate=todayMonth+"/"+todayDate.getDate()+"/"+todayDate.getFullYear(),todayDate.setFullYear(todayYear+40),endDate=todayMonth+"/"+todayDate.getDate()+"/"+todayDate.getFullYear(),cal.defaults={calId:"via-calender",format:"dd/mm/yyyy",title:"Select Date",viewDate:todayDateString,jumperControls:"false",arrowControls:"true",numMonths:"1",selectedDate:todayDateString,startDate:startDate,endDate:endDate},calOpts&&(cal.defaults=$.extend({},cal.defaults,calOpts.defaults||{})),cal.calElement="",cal.currentMonth="",cal.currentRow="",cal.currentRowCount=0,cal.currentCellCount=0,cal.currentCell=new STRING_TEMPLATE('<div class="vc-cell $splClass$" data-date="$date$">$data$</div>'),cal.jumperTemplate=new STRING_TEMPLATE('<div class="vc-input-grp" id="vc-jumperContainer"><select data-role="none" id="vc-jumperMonth" class="vc-input"></select><select data-role="none" id="vc-jumperYear" class="vc-input"></select><input data-role="none" id="vc-jumperButton"class="vc-input vc-input-button" type="button" value="Open Month"></div>'),cal.newRow=function(){return new STRING_TEMPLATE('<div class="vc-row">$cell$</div>')},cal.newMonth=function(year,month,firstControlClass,lastControlClass,headLabel,jumperEnabledClass){var newMonth=new STRING_TEMPLATE('<div class="vc-month-box-container" data-year="$year$" data-month="$month$"><div class="vc-month-box-head"><span class="vc-month-box-head-cell vc-month-controls icon-leftarrowthin $isFirstControl$" style="text-align: left;"></span><span class="vc-month-box-head-cell $jumperEnabled$">$headLabel$</span><span class="vc-month-box-head-cell vc-month-controls icon-Rightarrowthin $isLastControl$" style="text-align: right;"></span></div><div class="vc-month-box">$row$</div></div>');return newMonth.setAttribute("year",year,!0,!0),newMonth.setAttribute("month",month,!0,!0),newMonth.setAttribute("headLabel",headLabel,!0,!0),newMonth.setAttribute("isFirstControl",firstControlClass,!0,!0),newMonth.setAttribute("isLastControl",lastControlClass,!0,!0),newMonth.setAttribute("jumperEnabled",jumperEnabledClass,!0,!0),newMonth},cal.newCal=function(){var newCal=new STRING_TEMPLATE('<div id="$calId$" data-role="page" class="via-calender"><div class="vc-title"><span>$title$<div class="vc-message"></div><span class="vc-holiday-label">'+JS_UTIL.translate("VC_Holidays")+'</span></span><span id="vc-close" class="vc-close"></span></div>$jumperEnabled$</div>');newCal.setAttribute("calId",cal.defaults.calId,!0,!0),newCal.setAttribute("title",cal.defaults.title,!0,!0);var jumperEnabled="";return cal.defaults.jumperControls&&(jumperEnabled=cal.jumperTemplate.toString()),newCal.setAttribute("jumperEnabled",jumperEnabled,!0,!0),newCal},cal.finalizeRow=function(){""!=cal.currentRow&&(cal.currentRow.setAttribute("cell","",!0,!0),cal.currentMonth.setAttribute("row",cal.currentRow.toString(!0),!0),cal.currentCellCount=0)},cal.finalizeMonth=function(){if(""!=cal.currentMonth)return cal.finalizeRow(),cal.currentRow="",cal.currentMonth.setAttribute("row","",!0,!0),cal.currentRowCount=0,cal.currentMonth.toString(!0)},cal.addDate=function(data,splClass){cal.currentCellCount%7==0&&(cal.finalizeRow(),cal.currentRow=cal.newRow(),cal.currentRowCount++),cal.currentCell.refresh(),cal.currentCell.setAttribute("date",data),cal.currentCell.setAttribute("splClass",splClass),cal.currentCell.setAttribute("data",data),cal.currentRow.setAttribute("cell",cal.currentCell.toString(),!0),cal.currentCellCount++},cal.linker=function(){var linkedToElement=$("#"+cal.defaults.linkedTo);if(linkedToElement.length>0){var linkedToDate=linkedToElement.attr("data-date")||linkedToElement.val()||linkedToElement.text();if(!JS_UTIL.isStringBlank(linkedToDate)){var newStartDate=new Date(linkedToDate);cal.defaults.linkedToGap&&newStartDate.setDate(newStartDate.getDate()+parseInt(cal.defaults.linkedToGap));var newStartDateString=newStartDate.getMonth()+1+"/"+newStartDate.getDate()+"/"+newStartDate.getFullYear();cal.defaults.startDate=newStartDateString,cal.defaults.viewDate=newStartDateString}}},cal.addMonth=function(year,month,opts){var daysInMonth=JS_UTIL.getDaysInMonth(year,month),startDate=new Date(cal.defaults.startDate),endDate=new Date(cal.defaults.endDate),selectedDate=new Date(cal.defaults.selectedDate),firstDateOfMonth=new Date(year,month,1),lastDateOfMonth=new Date(year,month,daysInMonth);monthOpts={firstControlClass:"",lastControlClass:"",jumperEnabledClass:""},opts&&(monthOpts=$.extend({},monthOpts,opts)),cal.currentMonth=cal.newMonth(year,month,monthOpts.firstControlClass,monthOpts.lastControlClass,"<span>"+cal.mon[month]+"</span> "+year,monthOpts.jumperEnabledClass);for(var i=0;i<=6;i++)cal.addDate(cal.days[i],"vc-head-cell");var numPrevFills=firstDateOfMonth.getDay();if(0!=numPrevFills)for(prevEnd=JS_UTIL.getDaysInMonth(year,month-1),prevStart=prevEnd-numPrevFills+1,i=prevStart;i<=prevEnd;i++)cal.addDate(i,"vc-disabled-cell");for(var i=1;i<=daysInMonth;i++){var splClass="",disDate=new Date(year,month,i);1==JS_UTIL.compareDates(startDate,disDate)||JS_UTIL.compareDates(endDate,disDate)==-1?splClass="vc-disabled-cell":0==JS_UTIL.compareDates(selectedDate,disDate)&&(splClass="vc-selected-cell"),cal.addDate(i,splClass)}var numPostFills=6-lastDateOfMonth.getDay();numPostFills+=7*(7-cal.currentRowCount);for(var i=1;i<=numPostFills;i++)cal.addDate(i,"vc-disabled-cell");cal.calElement.append(cal.finalizeMonth())},cal.showMonths=function(year,month,numMonths,opts){var endDate=new Date(cal.defaults.endDate);if(cal.linker(),new Date(cal.defaults.startDate)<new Date(year,month,1))var prevOpts={firstControlClass:"vc-month-control-active js-prev-month"};if(1==numMonths){if(endDate>new Date(year,month,JS_UTIL.getDaysInMonth(year,month)))var nextOpts={lastControlClass:"vc-month-control-active js-next-month"};prevOpts=$.extend({},prevOpts,nextOpts,opts||{})}if(cal.addMonth(year,month,$.extend({},prevOpts,opts||{})),numMonths>1){for(var i=month+1;i<parseInt(month)+parseInt(numMonths)-1;i++){var date=new Date(year,i,1);if(endDate<date)return;cal.addMonth(date.getFullYear(),date.getMonth(),opts)}if(endDate<new Date(year,i,1))return;if(endDate>new Date(year,i,JS_UTIL.getDaysInMonth(year,i)))var nextOpts={lastControlClass:"vc-month-control-active js-next-month"};var date=new Date(year,i,1);cal.addMonth(date.getFullYear(),date.getMonth(),$.extend({},nextOpts,opts||{}))}},cal.alterCal=function(year,month,numMonths){var date=new Date(year,month);if($("#"+cal.defaults.calId).length<=0){var makePage=$(cal.newCal().toString(!0));cal.element.after(makePage)}if(cal.calElement=$("#"+cal.defaults.calId),cal.calElement.find(".vc-month-box-container").remove(),cal.showMonths(date.getFullYear(),date.getMonth(),numMonths),"function"==typeof cal.defaults.alterCallback){var params={cal:cal};params=$.extend({},params,cal.defaults.alterCallbackOpts||{}),cal.defaults.alterCallback(params)}cal.addHolidays(),cal.config(),cal.rangeFun()},cal.rangeFun=function(){var linkedToElement=$("#"+cal.defaults.linkedTo);if(linkedToElement.length>0){var linkedToDate=linkedToElement.attr("data-date")||linkedToElement.val()||linkedToElement.text();if(!JS_UTIL.isStringBlank(linkedToDate)){var linkedToDate=new Date(linkedToDate);$("#"+cal.defaults.calId+" .vc-cell:not('.vc-disabled-cell,.vc-head-cell')").each(function(){var el=$(this),date=el.attr("data-date"),monthContainer=el.parent().parent().parent(),year=monthContainer.attr("data-year"),month=monthContainer.attr("data-month"),thisDate=new Date(year,month,date);el.hover(function(){var stDate=new Date(linkedToDate);$(".vc-range-class").removeClass("vc-range-class");for(var d=stDate;d<=thisDate;d.setDate(d.getDate()+1))cal.addClassToDate(d.getFullYear(),d.getMonth(),d.getDate(),"vc-range-class")})})}}},cal.addHolidays=function(){var holidayList=cal.defaults.holidayList;for(var date in holidayList)cal.addHolidayToDate(date,holidayList[date])},cal.hide=function(){cal.defaults.hideCal&&"function"==typeof cal.defaults.hideCal&&cal.defaults.hideCal(),$("#"+cal.defaults.calId).hide()},cal.show=function(opts,newElement){opts&&(cal.defaults=$.extend({},cal.defaults,opts.defaults||{})),cal.element=newElement||cal.element,cal.linker();var date=new Date(cal.defaults.viewDate);cal.alterCal(date.getFullYear(),date.getMonth(),cal.defaults.numMonths);var message="";return $("#"+cal.defaults.calId+" .vc-message").html(""),cal.defaults.message&&(message=cal.defaults.message),$("#"+cal.defaults.calId+" .vc-message").html(message),cal.defaults.showCal&&"function"==typeof cal.defaults.showCal?(cal.defaults.showCal(),void $("#"+cal.defaults.calId).show()):void $("#"+cal.defaults.calId).slideDown()},cal.callBack=function(value){return cal.hide(),cal.element.attr("data-date",value.defaultString),void 0!=cal.func?void cal.func(value,cal.defaults.callBackParams):void cal.element.val(value.date)},cal.config=function(){$("#"+cal.defaults.calId+" #vc-close").click(function(event){event.preventDefault(),cal.hide()}),$("#"+cal.defaults.calId+" .js-next-month").click(function(event){event.preventDefault();var monthContainer=$("#"+cal.defaults.calId+" .vc-month-box-container")[0];cal.alterCal(parseInt(monthContainer.getAttribute("data-year")),parseInt(monthContainer.getAttribute("data-month"))+1,cal.defaults.numMonths)}),$("#"+cal.defaults.calId+" .js-prev-month").click(function(event){event.preventDefault();var monthContainer=$("#"+cal.defaults.calId+" .vc-month-box-container")[0];cal.alterCal(parseInt(monthContainer.getAttribute("data-year")),parseInt(monthContainer.getAttribute("data-month"))-1,cal.defaults.numMonths)}),$("#"+cal.defaults.calId+" .vc-cell:not(.vc-disabled-cell,.vc-head-cell)").each(function(){$(this).click(function(event){event.preventDefault();var element=$(this),date=element.attr("data-date"),monthContainer=element.parent().parent().parent(),year=monthContainer.attr("data-year"),month=monthContainer.attr("data-month");cal.callBack(DATE_FORMATTER.format(new Date(year,month,date),cal.defaults.format))})})},cal.addPrice=function(year,month,date,formattedData,price,priceType){var template=new STRING_TEMPLATE('<div class="vc-cell-sub-text fareType_'+priceType+'">$data$</div>'),element=$("#"+cal.defaults.calId+" .vc-month-box-container[data-month="+month+"][data-year="+year+"]").find(":not('.vc-disabled-cell,.vc-head-cell')[data-date="+date+"]");template.setAttribute("data",formattedData),element.find(".vc-cell-sub-text").remove(),element.append(template.toString()),element.attr("data-price",price)},cal.addClassToDate=function(year,month,date,elementClass){var element=$("#"+cal.defaults.calId+" .vc-month-box-container[data-month="+month+"][data-year="+year+"]").find(":not('.vc-disabled-cell,.vc-head-cell')[data-date="+date+"]");element.addClass(elementClass)},cal.addHolidayToDate=function(date,holiday){var dateObj=new Date(date),element=$("#"+cal.defaults.calId+" .vc-month-box-container[data-month="+dateObj.getMonth()+"][data-year="+dateObj.getFullYear()+"]").find(":not('.vc-disabled-cell,.vc-head-cell')[data-date="+dateObj.getDate()+"]");element.length>0&&(element.addClass("vc-holiday"),element.qtip({content:holiday,position:{at:"top center",my:"bottom center"},style:"holidayQtip"}))},cal.addMessage=function(message){$("#"+cal.defaults.calId+" .vc-message").html(message)},cal.getPriceOnDate=function(date){var price=$("#"+cal.defaults.calId+" .vc-month-box-container[data-month="+date.getMonth()+"][data-year="+date.getFullYear()+"]").find(":not('.vc-disabled-cell,.vc-head-cell')[data-date="+date.getDate()+"]").attr("data-price");return void 0!=price?price:0},cal.getMonthBoxContainerByDate=function(date){return $("#"+cal.defaults.calId+" .vc-month-box-container[data-month="+date.getMonth()+"][data-year="+date.getFullYear()+"]")}}function openPopupWindow(windowName,url,width,height){var soptions;soptions=width==-1&&height==-1?"menubar=yes,toolbar=yes,location=yes,directories=no,status=yes,scrollbars=yes,resizable=yes,screenX=0,screenY=0":"menubar=no,toolbar=no,location=no,directories=no,status=no,scrollbars=yes,resizable=yes,screenX=50,screenY=50,width="+width+",height="+height;var newwindow=window.open(url,windowName,soptions);newwindow.focus()}function feedBackForm(){var param={pageUrl:$("input[name=pageUrl]").val(),feedback:$("input[name=feedback]").val(),userMailId:$("input[name=userMailid]").val(),userName:$("input[name=userName]").val(),rating:$("input[name=rating]").val()},url=JS_UTIL.addAjaxSystemParams("/apiv2/common/feedback",{jsonData:!1,addAuthToken:!0}),successHandler=function(res){MODAL_PANEL.hide("#feedBackSubmitForm"),MODAL_PANEL.show("#thanksResponse",{closeButton:!0}),setTimeout(function(){MODAL_PANEL.hide("#thanksResponse")},3e3)},errorHandler=function(err){},opts={type:"POST",params:JSON.stringify(param),async:!0,timeout:"30000",success:{handler:successHandler},error:{handler:errorHandler},scope:this};AJAX_UTIL.send(url,opts)}JS_UTIL=new function(){this.getFltSrchUrlFromQry=function(userQuery){return"/flight/search"},this.attachWindowCloseListener=function(listenerConfig){var windowCloseEvent=window.attachEvent||window.addEventListener,chkEvent=window.attachEvent?"onbeforeunload":"beforeunload";windowCloseEvent(chkEvent,this.storeAbandonedParam.bind(this,listenerConfig))},this.storeAbandonedParam=function(listenerConfig){param={},param.name=$(listenerConfig.fNameSelector).val().trim(),param.emailId=$(listenerConfig.emailIdSelector).val().trim(),param.searchLink=listenerConfig.searchLink,param.productType=listenerConfig.productType,param.itineraryKey=listenerConfig.itineraryKey,param.name.length&&param.emailId.length&&this.storeDataHelper(param,listenerConfig.windowClosed)},this.leadingZeros=function(nr,num){if(parseInt(nr,10)==nr&&NaN!=parseInt(num,10)){for(;(""+nr).length<num;)nr="0"+nr;return nr}return null},this.paginateArray=function(resultArray,opts){var defaults={offset:20};if(!(resultArray.length>0))return!1;for(var resultChunk=[],opts=$.extend({},defaults,opts||{}),page=0;page<resultArray.length;page++)resultChunk.push(resultArray.slice(page,page+opts.offset)),page+=opts.offset;return resultChunk},this.listenerConfigHelper=function(nameSelector,idSelector,orderRefId,windowClosed){var listenerConfig={fNameSelector:nameSelector,emailIdSelector:idSelector,searchLink:searchResultUrl,productType:"FLIGHT",itineraryKey:orderRefId,windowClosed:windowClosed};return listenerConfig},this.storeDataHelper=function(param,browserClosed){param.isBrowserClosed=browserClosed;var url=JS_UTIL.addAjaxSystemParams("/apiv2/communicate/abandoned-user",{jsonData:!1,addAuthToken:!0}),opts={type:"PUT",async:!0,timeout:"10000",params:JSON.stringify(param)};AJAX_UTIL.send(url,opts)},this.fillIsdDropDown=function(isdSelects){var phoneMaxLength={AE:11,IN:10,PH:10,SG:12,ID:12};isdSelects=$(isdSelects);var countryInfo=countryList.countriesInfo,domesticId=window.pageOpts.domesticCountryId;isdSelects.each(function(){var el=$(this);if(el.find("option").length<=1)for(var i in countryInfo){var country=countryInfo[i],selected="";domesticId.toLowerCase()==country.code.toLowerCase()&&(selected=" selected");var maxLength="",maxLenVal=phoneMaxLength[country.code];maxLenVal&&(maxLength=" data-maxLength="+maxLenVal),el.append("<option value='"+country.phonecode+"' data-code='"+country.code+"' data-id='"+country.id+"'"+selected+maxLength+">"+country.phonecode+"</option>")}}),isdSelects.change(function(){var el=$(this),maxLen=el.find("option:selected").attr("data-maxLength");maxLen||(maxLen=14),$("#"+el.attr("data-for")).attr("maxLength",maxLen)}),isdSelects.change()},this.fillCountryDropDown=function(countrySelects,value){countrySelects=$(countrySelects);var countryInfo=countryList.countriesInfo,domesticCode=window.pageOpts.domesticCountryId;countrySelects.each(function(){var el=$(this);if(el.find("option").length<=1)for(var i in countryInfo){var country=countryInfo[i],selected="";domesticCode==country.code&&(selected=" selected"),el.append("<option value='"+country[value||"code"]+"'data-name='"+country.name+"' data-code='"+country.code+"' data-id='"+country.id+"'"+selected+">"+country.name+"</option>")}})},this.fillCountryNamesDropDown=function(countrySelects,value){countrySelects=$(countrySelects);var countryInfo=countryList.countriesInfo,domesticCode=window.pageOpts.domesticCountryId;countrySelects.each(function(){var el=$(this);if(el.find("option").length<=1)for(var i in countryInfo){var country=countryInfo[i],selected="";domesticCode==country.code&&(selected=" selected"),el.append("<option value='"+country.name+"'data-name='"+country.name+"' data-code='"+country.code+"' data-id='"+country.id+"'"+selected+">"+country.name+"</option>")}})},this.parseCookies=function(cookie){if(!cookie)return{};var list={},rc=cookie;return rc&&rc.split(";").forEach(function(cookie){var parts=cookie.split("=");list[parts.shift().trim()]=decodeURI(parts.join("="))}),list},this.getFirstNonEmptyString=function(str1,str2){if("object"!=typeof str1)return JS_UTIL.isStringBlank(str1)?str2||"":str1;for(var i in str1)if(!JS_UTIL.isStringBlank(str1[i]))return str1[i];return""},this.calculateAge=function(dob,refDate){dob=new Date(dob);var today=new Date;refDate&&(today=new Date(refDate));var age=today.getFullYear()-dob.getFullYear(),m=today.getMonth()+1-(dob.getMonth()+1);return(m<0||0===m&&today.getDate()<dob.getDate())&&age--,age},this.getObjLength=function(obj){count=0;for(var i in obj)count++;return count},this.leadingZeros=function(nr,num){if(parseInt(nr,10)==nr&&NaN!=parseInt(num,10)){for(;(""+nr).length<num;)nr="0"+nr;return nr}return null},this.clearForm=function(className){$("."+className).find(":input").each(function(){switch(this.type){case"password":case"text":case"textarea":case"file":case"select-one":case"select-multiple":$(this).val("");break;case"checkbox":case"radio":this.checked=!1}})},this.getChat=function(id,opts){if(!JS_UTIL.isStringBlank(id)){opts=$.extend({},{position:"tr"},opts||{});var ua=navigator.userAgent.toLowerCase(),platform=navigator.platform.toLowerCase();platformName=ua.match(/ip(?:ad|od|hone)/)?"ios":(ua.match(/(?:webos|android)/)||platform.match(/mac|win|linux/)||["other"])[0],isMobile=/ios|android|webos/.test(platformName),isMobile||($(".chatBox").show(),window.$zopim||function(d,s){var z=$zopim=function(c){z._.push(c)},$=z.s=d.createElement(s),e=d.getElementsByTagName(s)[0];z.set=function(o){z.set._.push(o)},z._=[],z.set._=[],$.async=!0,$.setAttribute("charset","utf-8"),$.src="//v2.zopim.com/?"+id,z.t=+new Date,$.type="text/javascript",e.parentNode.insertBefore($,e)}(document,"script"),$zopim(function(){JS_UTIL.isStringBlank(opts.userName)||$zopim.livechat.setName(opts.userName.replace(/'/g,"")),$zopim.livechat.window.setTitle("Chat with Us!"),$zopim.livechat.window.setPosition(opts.position),$zopim.livechat.button.setPosition(opts.position),$zopim.livechat.theme.setColor("#12B58A"),$zopim.livechat.theme.reload(),$zopim.livechat.window.setSize("small"),$zopim.livechat.window.setOffsetVertical(123),$zopim.livechat.window.setOffsetHorizontal(10),$zopim.livechat.button.setOffsetVertical(123),$zopim.livechat.button.setOffsetHorizontal(10),$zopim.livechat.window.hide();try{$zopim.livechat.button.setPositionMobile(opts.position),$zopim.livechat.button.setOffsetVerticalMobile(183),$zopim.livechat.button.setOffsetHorizontalMobile(10)}catch(e){console.log(e)}}))}},this.getCookie=function(name){var value="; "+document.cookie,parts=value.split("; "+name+"=");if(2==parts.length)return parts.pop().split(";").shift()},this.getHeader=function(refresh){var successHandler=function(result){return result?($("#headerCont").html(result),void loginJs.config()):void alert(JS_UTIL.translate("GEN_ERR_MSG","Something went wrong please try later"))},thisPageURL=window.location.href,thisPageOrigin=window.location.origin,urlWithoutOrigin=thisPageURL.split(thisPageOrigin)[1],navProductType=""==urlWithoutOrigin||"/"==urlWithoutOrigin?"flight":urlWithoutOrigin.split("/")[1],userId=JS_UTIL.getCookie("userId"),url="/_header?n="+userId/2;refresh&&(url="/_header?n="+Math.random()),url=url+"&navProductType="+navProductType;var opts={type:"GET",success:{handler:successHandler},scope:this,cache_maxAge:12e5};AJAX_UTIL.send(url,opts)},this.translate=function(key,defaultStr,src){var msg=void 0;if(src)msg=src[key];else try{msg=JS_UTIL.languageBundle.translate(key)}catch(e){try{msg=languageBundle[key]}catch(e){}}if(!msg)if(defaultStr)msg=defaultStr;else{var regEx=new RegExp("_","g");msg=key.replace(regEx," ")}return msg},this.getFooter=function(){var successHandler=function(result){return result?($("#footerCont").html(result),$("#selectedList").click(function(){$("#listCont").toggle()}),void $("body").mouseup(function(e){var container=$("#listCont");container.is(e.target)||0!==container.has(e.target).length||e.target===$("#selectedList")[0]||container.hide()})):void alert(JS_UTIL.translate("GEN_ERR_MSG","Something went wrong, please try again later"))},url="/_footer",opts={type:"GET",success:{handler:successHandler},scope:this,cache_maxAge:12e5};AJAX_UTIL.send(url,opts)},this.negateValues=function(object){for(var i in object)object[i]*=-1;return object},this.redirectToTicketDetail=function(orderRef){var result=JS_UTIL.getFMNStatus(orderRef),url="/itinerary";return result?(url+="/"+orderRef,void window.open(url)):void alert(JS_UTIL.translate("Enter_Val_Ref","Enter Valid Order Reference"),{autoClose:!1})},this.routeByFlow=function(orderRef){var flowType=JS_UTIL.checkFlow(orderRef),url="";return!!flowType||(url=JS_UTIL.getFMNUrl(orderRef),window.open(url),!1)},this.checkFlow=function(fmn){var returnVal=!1,rawUrl="apiv2/booking/check-flow/"+fmn+"?authToken=553f5767-373f-4d98-9e6d-08fa87400a42&requestSource=NODE_B2C&__xreq__=true",url=JS_UTIL.addAjaxSystemParams(rawUrl),successHandler=function(result){result&&result.value&&(returnVal=result.value)},errorHandler=function(result){console.log(result)},opts={async:!1,success:{handler:successHandler},error:{handler:errorHandler},scope:this};return AJAX_UTIL.send(url,opts),returnVal},this.getFMNUrl=function(fmn){var url="/bdo?action1=TICKET_DETAILS&referencePnr=";return url+fmn},this.getFMNStatus=function(fmn){var returnVal=void 0,url=JS_UTIL.addAjaxSystemParams("/apiv2/booking/retrieve/"+fmn+"?authToken=553f5767-373f-4d98-9e6d-08fa87400a42&requestSource=NODE_B2C&__xreq__=true"),successHandler=function(result){result&&result.refId&&(returnVal=result.refId)},errorHandler=function(result){console.log(result)},opts={async:!1,success:{handler:successHandler},error:{handler:errorHandler},scope:this,dataType:"json"};return AJAX_UTIL.send(url,opts),returnVal},this.pollOrderStatus=function(fmn){var returnVal=void 0,url=JS_UTIL.addAjaxSystemParams("/apiv2/booking/completed/"+fmn+"?authToken=553f5767-373f-4d98-9e6d-08fa87400a42&requestSource=NODE_B2C&__xreq__=true"),successHandler=function(result){result&&(returnVal=result.value)},errorHandler=function(result){console.log(result)},opts={async:!1,success:{handler:successHandler},error:{handler:errorHandler},scope:this,dataType:"json"};return AJAX_UTIL.send(url,opts),returnVal},this.updateAmt=function(start,endVal,element,opts){start!=endVal&&(opts=$.extend({},{currency:"sg",duration:1e3,easing:"swing","class":null,color:"#12B58A",escapeEl:""},opts||{}),$(element).not(opts.escapeEl).each(function(){var el=$(this);el.stop(!0,!0);var initColor=el.css("color");el.css("color",opts.color),$({value:start}).animate({value:endVal},{duration:opts.duration,easing:opts.easing,step:function(){el.html(PRICE_FORMATTER.format(this.value,opts["class"],opts.currency))},complete:function(){el.css("color",initColor),$(element).html(PRICE_FORMATTER.format(endVal,opts["class"],opts.currency))}})}),$(opts.escapeEl).html(PRICE_FORMATTER.format(endVal,opts["class"],opts.currency)))},this.eval=function(exp){return eval(exp)},this.adjustDate=function(adjusts,date){return date||(date=new Date),date=new Date(date),"Invalid Date"==date?new Date:(date.setFullYear(date.getFullYear()+parseInt(adjusts.years|adjusts.year|adjusts[0]|0)),date.setMonth(date.getMonth()+parseInt(adjusts.months|adjusts.month|adjusts[1]|0)),date.setDate(date.getDate()+parseInt(adjusts.days|adjusts.day|adjusts.date|adjusts[2]|0)),date.setHours(date.getHours()+parseInt(adjusts.hours|adjusts.hour|adjusts[3]|0)),date.setMinutes(date.getMinutes()+parseInt(adjusts.minutes|adjusts.minute|adjusts[4]|0)),date.setSeconds(date.getSeconds()+parseInt(adjusts.seconds|adjusts.second|adjusts[5]|0)),date.setMilliseconds(date.getMilliseconds()+parseInt(adjusts.milliseconds|adjusts.millisecond|adjusts[6]|0)),date)},this.getDateFromArray=function(array){var date=new Date;return date.setFullYear(parseInt(array.years|array.year|array[0]|0)),date.setMonth(parseInt(array.months|array.month|array[1]|0)),date.setDate(parseInt(array.days|array.day|array.date|array[2]|0)),date.setHours(parseInt(array.hours|array.hour|array[3]|0)),date.setMinutes(parseInt(array.minutes|array.minute|array[4]|0)),date.setSeconds(parseInt(array.seconds|array.second|array[5]|0)),date.setMilliseconds(parseInt(array.milliseconds|array.millisecond|array[6]|0)),date},this.getDateArrayfromObject=function(dateVal){var arr=[];return dateVal=new Date(dateVal),arr[0]=dateVal.getFullYear(),arr[1]=dateVal.getMonth(),arr[2]=dateVal.getDate(),arr[3]=dateVal.getHours(),arr[4]=dateVal.getMinutes(),arr[5]=dateVal.getSeconds(),arr[6]=dateVal.getMilliseconds(),arr},this.getDateTimestamp=function(dateString){if(!dateString){var date=new Date;return date.getTime()}var date=new Date(dateString);return date.getTime()},this.smoothScrollToEl=function(element,focus,time){time=time||200,focus&&$(element).focus(),$("html, body").animate({scrollTop:$(element).offset().top-100},time)},this.smoothScroll=function(offset,time){time=time||1e3,$("html, body").animate({scrollTop:offset},1e3)},this.fillDateDropDown=function(container,showPlaceholder){var html="";showPlaceholder&&(html+="<option>"+JS_UTIL.translate("GEN_DAY_LABEL","Day")+"</option>");for(var i=1;i<=31;i++){var val=JS_UTIL.numPad(i,2,0);html+='<option value="'+val+'">'+val+"</option>"}return container?void container.append(html):html},this.displayDateMonth=function(dt){var month=JS_UTIL.translate("monthNamesFullArray",["January","February","March","April","May","June","July","August","September","October","November","December"]);return dt.getDate()+" "+month[dt.getMonth()]+" "+dt.getFullYear()},this.fillMonthDropDown=function(container,format,showPlaceholder){var html="",month=JS_UTIL.translate("monthNamesFullArray",["January","February","March","April","May","June","July","August","September","October","November","December"]),mon=JS_UTIL.translate("monthNamesShortArray",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);showPlaceholder&&(html+="<option>"+JS_UTIL.translate("GEN_MONTH_LABEL","Month")+"</option>");for(var i=0;i<12;i++){var val=JS_UTIL.numPad(i+1,2,0),showVal=val;"mon"==format?showVal=mon[i]:"month"==format&&(showVal=month[i]),html+='<option value="'+val+'">'+showVal+"</option>"}return container?void container.append(html):html},this.fillYearDropDown=function(container,startYear,endYear,asc,showPlaceholder){for(var html="",i=startYear;i<=endYear;i++)asc?html+='<option value="'+i+'">'+i+"</option>":html='<option value="'+i+'">'+i+"</option>"+html;return showPlaceholder&&(html="<option>"+JS_UTIL.translate("GEN_YEAR_LABEL","Year")+"</option>"+html),container?void container.append(html):html},this.fillYearDropDownNew=function(container,startYear,endYear,asc,showPlaceholder){var html="";if("true"==asc)for(var i=startYear;i<=endYear;i++)html+='<option value="'+i+'">'+i+"</option>";else for(var i=endYear;i>=startYear;i--)html+='<option value="'+i+'">'+i+"</option>";return showPlaceholder&&(html="<option>"+JS_UTIL.translate("GEN_YEAR_LABEL","Year")+"</option>"+html),container?void container.append(html):html},this.logEvent=function(element,opts){try{opts=$.extend({},{ac:void 0,lab:void 0,cat:void 0,append:""},opts||{}),JS_UTIL.isStringBlank(opts.append)||(opts.append="-"+opts.append);var types={"input-password":"TEXTBOX","input-text":"TEXTBOX","input-email":"TEXTBOX","input-number":"TEXTBOX","input-tel":"TEXTBOX","input-radio":"RADIO","input-checkbox":"CHECKBOX","input-button":"BUTTON","input-submit":"BUTTON","button-button":"BUTTON","button-submit":"BUTTON",button:"BUTTON",a:"LINK",select:"SELECT",div:"BUTTON"};opts.ac&&opts.cat&&opts.lab||(element=$(element)),opts.ac||(opts.ac=element[0].getAttribute("id")||element[0].getAttribute("name"));var type="";if(!opts.cat){var key=element.prop("tagName").toLowerCase();type=element.attr("type"),JS_UTIL.isStringBlank(type)||(key+="-"+type),opts.cat=types[key]}opts.lab||(opts.lab=element.val()||element.html().substring(0,15),(element.parents(".paymentRow").length>0||"password"==type)&&(opts.lab=opts.ac)),!window.ga||JS_UTIL.isStringBlank(opts.lab)||JS_UTIL.isStringBlank(opts.cat)||ga("send","event",opts.cat,opts.ac,opts.lab+opts.append)}catch(e){console.log(e)}},this.mergeJson=function(json1,json2){var json1=json1||{},json2=json2||{},result={};for(key in json1)result[key]=json1[key];for(key in json2)result[key]=json2[key];return result},this.validateDate=function(dateString,strictMode){var date=new Date(dateString);if("Invalid Date"!=date){if(strictMode&&!dateString.getMonth){var array=dateString.split("-");if(date.getDate()!=parseInt(array[2])||date.getMonth()+1!=parseInt(array[1])||date.getFullYear()!=parseInt(array[0]))return}return date}},this.dateDiffInDays=function(a,b){var _MS_PER_DAY=864e5,utc1=Date.UTC(a.getFullYear(),a.getMonth(),a.getDate()),utc2=Date.UTC(b.getFullYear(),b.getMonth(),b.getDate());return Math.floor((utc2-utc1)/_MS_PER_DAY)},this.isDateBetween=function(dateString,lowerLimit,upperLimit,strictMode){var inputDate=JS_UTIL.validateDate(dateString,strictMode),lowerLimit=JS_UTIL.validateDate(lowerLimit,strictMode),upperLimit=JS_UTIL.validateDate(upperLimit,strictMode);if(!inputDate||!lowerLimit||!upperLimit)return!1;var lowerResult=JS_UTIL.compareDates(inputDate,lowerLimit),upperResult=JS_UTIL.compareDates(inputDate,upperLimit);return 1==lowerResult&&upperResult==-1},this.validateEmail=function(str,customValidator){var validator=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return customValidator&&(validator=new RegExp(customValidator)),validator.test(str)},this.setDateFields=function(contSel,targetSel,daySel,monthSel,yearSel,format,passInvalid){$(contSel).each(function(){var cont=$(this),target=cont.find(targetSel),day=JS_UTIL.numPad(cont.find(daySel).val(),2,0),month=JS_UTIL.numPad(cont.find(monthSel).val(),2,0),year=JS_UTIL.numPad(cont.find(yearSel).val(),4,-1),dateString=year+"-"+month+"-"+day;target.val(""),target.attr("data-date","");try{var date=JS_UTIL.validateDate(dateString,!0);if(!date&&!passInvalid)throw"Invalid Date";target.val(DATE_FORMATTER.format(dateString,format).date),target.attr("data-date",dateString)}catch(e){console.log("Couldn't convert to valid date string: "+dateString)}})},this.trimAndSet=function(el,toLowerCase){if(el=$(el),!(el.length<=0)){var val=$(el).val().trim();return 1==toLowerCase?val=val.toLowerCase():0==toLowerCase&&(val=val.toUpperCase()),$(el).val(val),val}},this.validateMobile=function(str,opts){var validatorMap={62:"^(62)[1-9][0-9]{7,10}$",971:"^(971)[1-9][0-9]{8,9}$",65:"^(65)[1-9][0-9]{7,10}$",91:"^(91)[9|8|7|6][0-9]{9}$",63:"^(63)[9|8][0-9]{9}$","default":"^[0-9]{8,14}$"},countryValidatorMap={SG:"65",PH:"63",ID:"62",IN:"91",AE:"971"};opts=$.extend({},{countryCodeOrIsd:"default"},opts||{});var validator=opts.customValidator||validatorMap[opts.countryCodeOrIsd]||validatorMap[countryValidatorMap[opts.countryCodeOrIsd]]||validatorMap["default"];
return validator=new RegExp(validator),validator.test(str.trim())},this.validateMobileStrict=function(str,isd,countryCode,overrideKnownCodes){if(!str||!countryCode)return!1;countryCode=countryCode.toUpperCase();var returnVal=!1,knownCodes={AE:!0,ID:!0,IN:!0,SG:!0,PH:!0};if(overrideKnownCodes||!knownCodes[countryCode]){MODAL_PANEL.showWait({text:JS_UTIL.translate("VALIDATING_MSG","Please wait! Validating your inputs")});var url=JS_UTIL.addAjaxSystemParams("/apiv2/common/mobile-validation/"+countryCode+"/"+str),successHandler=function(res){MODAL_PANEL.hide(),res&&"true"===res.value.toString()&&(returnVal=!0)},errorHandler=function(){MODAL_PANEL.hide()},opts={type:"GET",async:!1,timeout:"5000",success:{handler:successHandler},error:{handler:errorHandler},scope:this};AJAX_UTIL.send(url,opts)}else returnVal=JS_UTIL.validateMobile(isd+str,{countryCodeOrIsd:isd});return returnVal},this.validateErechargeMobile=function(checkStr,isd,countryCode){if(!checkStr||!countryCode)return!1;countryCode=countryCode.toUpperCase();var returnVal=!1;switch(countryCode){case"ID":0!==checkStr.indexOf("0")?(alert(JS_UTIL.translate("Num_SRT_WITH_0","number should starts with 0")),returnVal=!1):returnVal=!0;break;case"PH":returnVal=!0}return returnVal&&JS_UTIL.validateMobile(checkStr)},this.addAjaxSystemParams=function(url,opts){var defaults={jsonData:!1};return opts=$.extend({},defaults,opts||{}),/^\//.test(url)||(url="/"+url),(/localhost/.test(window.location.origin)||/124.153.103.66:3000/.test(window.location.origin))&&(url=opts.jsonData?"redirect"+url:"/redirect"+url),/\?/.test(url)||(url+="?"),url+="&flowType=NODE&ajax=true",url+=opts.jsonData?"&jsonData=true":"&jsonData=false",opts.addAuthToken&&(url+="&authToken=553f5767-373f-4d98-9e6d-08fa87400a42&requestSource=NODE_B2C&__xreq__=true"),url},this.compareDates=function(date1,date2){if(date1=new Date(date1),date2=new Date(date2),"Invalid Date"!=date1&&"Invalid Date"!=date2)return date1<date2?-1:date1>date2?1:0},this.getDateObject=function(year,month,day,hour,minutes,sec,millisec){return"undefined"==typeof month?new Date(year):"undefined"==typeof year?new Date:new Date(year,month,day,hour,minutes,sec,millisec)},this.getDaysInMonth=function(year,month){return new Date(parseInt(year),parseInt(month)+1,0).getDate()},this.isNumberKey=function(evt){var charCode=evt.keyCode;return!(charCode>31&&(charCode<48||charCode>57))},this.isStringBlank=function(str){return void 0==str||(testExp=new RegExp("(^$|^null$|^undefined$|^[ ]+$)"),testExp.test(str))},this.numPad=function(num,size,padVal){for(var numString=num+"";numString.length<size;)numString=padVal+numString;return numString},this.validatePassword=function(checkStr){return/^[a-zA-Z0-9\!\@\#\$%\^&\*\(\)\-\_\+\=\{\}\[\]\|\:\;\<\,\>\.\?\~]{8,101}$/.test(checkStr)},this.validateAddress=function(checkStr,condition){var checkOK,Message;switch(condition){case 1:checkOK="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ-.,/ #:",Message="Kindly fix Street and retry. It should only contain alphabets, digits, Parentheses, comma, hyphens, dots, dash and spaces.";break;case 2:checkOK="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ()",Message="Kindly fix City and retry. It should only contain alphabets (and no spaces).\nExample: Delhi";break;case 3:checkOK="0123456789",Message="Kindly fix Zipcode and retry. It should only contain digits.\nExample: 110019";break;case 4:checkOK="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ() ",Message="Kindly fix City and retry. It should only contain alphabets.\nExample: Delhi"}if(""==checkStr)return!1;if(checkStr.length>256)return alert("Invalid Entry, Only a maxiumum of 250 characters are supported"),!1;for(var i=1;i<checkStr.length;i++){ch=checkStr.charAt(i);for(var j=0;j<checkOK.length&&ch!=checkOK.charAt(j);j++);if(j==checkOK.length)return alert(Message),!1}return!0},this.validateInteger=function(checkStr){return checkStr.match(/(^-?\d\d*$)/)},this.validateNumeric=function(checkStr){return checkStr.match(/(^-?\d\d*\.\d*$)|(^-?\d\d*$)|(^-?\.\d\d*$)/)},this.getDurationString=function(diff,showMinIfDays,showDays){showMinIfDays="undefined"!=typeof showMinIfDays&&showMinIfDays;var days=0;showDays&&(days=Math.floor(diff/864e5),diff-=1e3*days*60*60*24);var hrs=Math.floor(diff/36e5);diff-=1e3*hrs*60*60;var min=Math.floor(diff/6e4),str="";return days>0&&(str+=days+""+JS_UTIL.translate("days_short","d")+" "),hrs>0&&(str+=hrs+""+JS_UTIL.translate("hrs_short","h")+" "),(0==days||showMinIfDays)&&(str+=min+"m"),str},this.leadingZeros=function(nr,num){if(parseInt(nr,10)==nr&&NaN!=parseInt(num,10)){for(;(""+nr).length<num;)nr="0"+nr;return nr}return null},this.strToDateObj=function(_date){var _d=_date.replace(/[- :.\s]/g,",").split(",");return _d[1]-=1,_d.unshift(Date),new(Function.prototype.bind.apply(Date,_d))},this.getDisplayTimefunction=function(tm){return this.leadingZeros(tm.getHours(),2)+":"+this.leadingZeros(tm.getMinutes(),2)},this.isElementInArray=function(element,array){element=$(element)[0];var returnVal=!1;return $(array).each(function(){$(this)[0]==element&&(returnVal=returnVal||!0)}),returnVal},this.hideElementOnBlur=function(element,opts){var defaults=($(element),{escapeElements:[]});opts=$.extend({},defaults,opts||{}),$("body").click(function(e){$(element).each(function(){$(this).is(e.target)||JS_UTIL.isElementInArray(e.target,opts.escapeElements)||JS_UTIL.isElementInArray(e.target,element)||0!==$(e.target).parents(element).length||($(this).hide(),opts.postFunction&&opts.postFunction())})})},this.isEmptyObj=function(obj){if("object"!=typeof obj)return!0;for(i in obj)return!1;return!0},this.replace=function(str,exp,repl,flag){return exp=new RegExp(exp,flag),str.replace(exp,repl)},this.fileUpload=function(options){var uploaderForm=new FormData;if("undefined"!=typeof options.elements&&options.elements.length>0)for(var index in options.elements)uploaderForm.append($(options.elements[index]).attr("name"),$(options.elements[index]).val());if("undefined"!=typeof options.fileInputs&&options.fileInputs.length>0)for(var index in options.fileInputs)uploaderForm.append($(options.fileInputs[index]).attr("name"),document.querySelector(options.fileInputs[index]).files[0]);if("undefined"!=typeof options.values)for(var index in options.values)uploaderForm.append(index,options.values[index]);var request=new XMLHttpRequest;request.open("POST",window.location.origin+"/fileupload"),options.updateProgress&&request.upload.addEventListener("progress",options.updateProgress),options.transferComplete&&(request.onreadystatechange=function(){request.readyState<4||(request.responseText.search(/success/i)>-1?options.transferComplete():options.transferFailed())}),options.transferFailed&&request.upload.addEventListener("error",options.transferFailed),options.transferCanceled&&request.upload.addEventListener("abort",options.transferCanceled),request.send(uploaderForm)},this.getWindowURL=function(){try{return window.location.href}catch(e){console.log(e)}},this.setActiveProduct=function(){var thisPageURL=window.location.href,thisPageOrigin=window.location.origin,urlWithoutOrigin=thisPageURL.split(thisPageOrigin)[1];$(".productNavItemCont .product").each(function(){$(this).removeClass("active")}),$(".productNavItemCont .product").each(function(){this.href.indexOf(urlWithoutOrigin)>-1&&$(this).addClass("active")})},this.capitalize=function(str){var lower=str.toLowerCase();return lower.replace(/(^| )(\w)/g,function(x){return x.toUpperCase()})},this.getImage=function(src,opts){if(!src||"#"==src)return"";if(!opts)var opts={};var defaults={id:"",alt:"","class":"",style:"",height:"",width:"",title:"",onerror:""};opts=JS_UTIL.mergeJson(defaults,opts);var imgEle='<img title="'+opts.title+'" src="'+src+'" alt="'+opts.alt+'" class="'+opts["class"]+'" style="'+opts.style+'" height="'+opts.height+'" width="'+opts.width+'" onerror='+opts.onerror+">";return imgEle},this.replaceStr=function(string,replaceRegex,replaceWith){var regEx=new RegExp(replaceRegex,"g");return string.replace(regEx,replaceWith)},this.setCookie=function(cname,cvalue,exdays){var d=new Date;exdays=parseInt(exdays),d.setTime(d.getTime()+24*exdays*60*60*1e3);var expires="expires="+d.toUTCString();document.cookie=cname+"="+cvalue+"; "+expires+";path=/"},this.getCookie=function(cname){for(var name=cname+"=",ca=document.cookie.split(";"),i=0;i<ca.length;i++){for(var c=ca[i];" "==c.charAt(0);)c=c.substring(1);if(0==c.indexOf(name))return c.substring(name.length,c.length)}return""},this.getStatusCode=function(status){var statusCode=0;switch(status){case"CANCELLED":statusCode=4;break;case"IN_PROGRESS":statusCode=2;break;case"PAYMENTNOTCOMPLETED":statusCode=7;break;case"CANCELLATIONINPROGRESS":statusCode=6;break;case"PAYMENTINPROGRESS":case"BLOCKINGINPROGRESS":statusCode=8;break;case"BLOCKED":statusCode=5;break;case"CONFIRMED":statusCode=1;break;default:statusCode=0}return statusCode},this.convertDate=function(inputFormat){function pad(s){return s<10&&1==String(s).length?"0"+s:s}var d=inputFormat.split("-");return[pad(d[2]),pad(d[1]),d[0]].join("/")},this.isPaymentDone=function(status){return"IN_PROGRESS"==status||"CONFIRMED"==status},this.isTypeable=function(key){if("number"!=typeof key)return!1;var isAlphaNum=key>=48&&key<=90,isNumpadNum=key>=96&&key<=111,isPunct=[8,32,46,144,145,186,187,188,189,190,191,192,219,220,221,222].indexOf(key)>-1;return isAlphaNum||isNumpadNum||isPunct},this.attachToolTip=function(){$("body").on("mouseover",".js-toolTip",function(event){var $target=$(this);$target.qtip({content:$target.attr("data-tip"),position:{my:"bottom center",at:"top center"},style:"holidayQtip",show:{ready:!0},hide:{event:"mouseout click scroll resize focusEnd"},onHide:function(){$target.qtip("destroy")}})})},this.CCPopUp=function(SEALURL,cId){window.open(""+SEALURL+"index.php?page=showCert&cId="+cId,"win","toolbar=0,location=0,directories=0,status=0,menubar=0,scrollbars=0,resizable=0,width=700,height=585"),self.name="mainWin"},this.appendScript=function(src){var script=document.createElement("script");script.src=src,document.getElementsByTagName("head")[0].appendChild(script)}};var LANGUAGE_SELECT=new function(){this.change=function(value){var url="/_setLanguage?lang="+value;JS_UTIL.setCookie("language_selected",value,30);var successHandler=function(result){if(result.success)return void location.reload()},opts={async:!1,type:"POST",success:{handler:successHandler}};AJAX_UTIL.send(url,opts)}},LOADING_DIV=new function(){this.show=function(divRef,opts){var defaults={};opts=$.extend({},defaults,opts||{}),loadingDiv=$('<div class="loadingDiv"><div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div></div>'),opts.css&&$(loadingDiv).css(opts.css),$(divRef).append(loadingDiv)},this.hide=function(divRef,opts){var defaults={};opts=$.extend({},defaults,opts||{}),$(divRef).find(".loadingDiv").hide()}},MODAL_PANEL=new function(){var obj=this;obj.parent=[],obj.show=function(divRef,opts){var defaults={closeButton:!1,closeBody:!0,css:{}};opts=$.extend({},defaults,opts||{}),opts.skipElements&&(opts.skipElements=","+opts.skipElements);var overlayDiv,overlayDivContainer,closeBtn;if(overlayDiv=$("#modalPanel"),0==overlayDiv.length)overlayDiv=$('<div class="modalPanelOverlay" id="modalPanel"><div class="modalPanelContainer"></div></div>'),overlayDivContainer=$('<div class="mdpContent"></div>'),overlayDiv.find(".modalPanelContainer").append(overlayDivContainer),$("body").append(overlayDiv);else{overlayDivContainer=overlayDiv.find(".mdpContent");var prevContent=$($(".mdpContent").children()[0]);try{obj.parent.append(prevContent)}catch(e){console.log(e)}0==obj.parent.length&&prevContent.remove()}var tempDiv=$(divRef);obj.parent=tempDiv.parent();try{overlayDivContainer.append(tempDiv),tempDiv.show(),tempDiv.removeClass("via-blur")}catch(e){console.log(e)}overlayDiv.find(".modalPanelClose").remove();try{overlayDiv.unbind("click",obj.closeBodyFunction)}catch(e){console.log(e)}opts.closeButton&&(closeBtn=$("<div class='modalPanelClose'></div>"),overlayDiv.find(".modalPanelContainer").prepend(closeBtn),closeBtn.click(function(){MODAL_PANEL.hide()})),overlayDiv.unbind("click"),opts.closeBody&&overlayDiv.click(obj.closeBodyFunction),$("body > div").not(".modalPanelOverlay,svg,script,.viaAlert,.noBlur"+(opts.skipElements||"")).addClass("via-blur"),$("body > form").not(".modalPanelOverlay,svg,script,.viaAlert,.noBlur"+(opts.skipElements||"")).addClass("via-blur"),$(".modalPanelOverlay").hide();var container=overlayDiv.find(".modalPanelContainer");container.attr("style","");for(var i in opts.css)container.css(i,opts.css[i]);overlayDiv.show(),$("body").css({overflow:"hidden"})},this.closeBodyFunction=function(e){"modalPanelOverlay"==$(e.target).attr("class")&&MODAL_PANEL.hide()},this.hide=function(opts){$("body > div").not(".modalPanelOverlay,.viaAlert").removeClass("via-blur"),$("body > form").not(".modalPanelOverlay,.viaAlert").removeClass("via-blur"),$(".modalPanelOverlay").hide(),$(".modalPanelClose").remove();var prevContent=$($(".mdpContent").children()[0]);prevContent.hide();try{obj.parent.append(prevContent)}catch(e){console.log(e)}0==obj.parent.length&&prevContent.remove(),$(".mdpContent").children().remove(),$("body").css({overflow:"auto"})},this.showWait=function(opts){MODAL_PANEL.hide();var defaults={timeout:0,text:JS_UTIL.translate("GEN_ALMOST_THERE_LABEL","Almost there!")};opts=$.extend({},defaults,opts||{});var html='<div><div class="spinner"><div class="bounce1"></div><div class="bounce2"></div><div class="bounce3"></div></div>';html+='<div class="modalPanelWaitMessage">'+opts.text+"</div></div>",MODAL_PANEL.show($(html),{closeBody:!1}),opts.timeout>0&&setTimeout(function(){MODAL_PANEL.hide()},opts.timeout)}},PRICE_FORMATTER=new function(){var obj=this;this.priceFormat=[],this.priceFormat.gen="$int$$dec$",this.priceFormat.spl='<span class="$splClass$">$int$</span>$dec$',this.formatters=[],this.formatters.gen=function(price,dropDec){var priceVal=parseFloat(price);dropDec&&(priceVal=parseInt(priceVal)),price=priceVal.toString(),price=price.split(".");var intArray=price[0].split(/(?=(?:...)*$)/);""==intArray[intArray.length-1]&&intArray.length--;var dec="";return price[1]&&(dec="."+price[1]),{dec:dec,intString:intArray.join(",")}},this.formatters.rp=function(price,dropDec){var priceVal=parseInt(price);price=priceVal.toString();var intArray=price.split(/(?=(?:...)*$)/);""==intArray[intArray.length-1]&&intArray.length--;var dec="";return priceVal>=1e3&&(dec="."+intArray[intArray.length-1],intArray.length--,dropDec&&(dec=JS_UTIL.translate("idrShortAppend","K"))),{dec:dec,intString:intArray.join(".")}},this.formatters.idr=this.formatters.rp,this.format=function(price,splClass,currency,dropDec,decLimit){currency=currency.toLowerCase().trim(),decLimit||(decLimit=2),price=parseFloat(parseFloat(price).toFixed(decLimit));var result={};try{result=obj.formatters[currency](Math.abs(price),dropDec)}catch(e){result=obj.formatters.gen(Math.abs(price),dropDec)}var format="gen";splClass&&(format="spl"),price<0&&(result.intString="-"+result.intString);var template=new STRING_TEMPLATE(this.priceFormat[format]);return template.setAttribute("int",result.intString),template.setAttribute("dec",result.dec),template.setAttribute("splClass",splClass),template.toString()}},STRING_TEMPLATE=function(str){this.template=str,this.str=str,this.strAppend=str,this.setAttribute=function(attr,val,isAppend,isLast){var regExp=new RegExp("\\$"+attr+"\\$","g");return isAppend?(append="",isLast||(append="$"+attr+"$"),void(this.strAppend=this.strAppend.replace(regExp,val+append))):void(this.str=this.str.replace(regExp,val))},this.toString=function(isAppend){return isAppend?this.strAppend:this.str},this.refresh=function(){this.str=this.template,this.strAppend=this.template}},DATE_FORMATTER=new function(){this.days=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],this.mon=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.dateFormat=[],this.dateFormat["dd-mm-yyyy"]="$dd$-$mm$-$yyyy$",this.dateFormat["yyyy-mm-dd hh:MM:ss,fff"]="$yyyy$-$mm$-$dd$ $hh$:$MM$:$ss$,$fff$",this.dateFormat["mm-dd-yyyy"]="$mm$-$dd$-$yyyy$",this.dateFormat["dd/mm/yyyy"]="$dd$/$mm$/$yyyy$",this.dateFormat["yyyy/mm/dd"]="$yyyy$/$mm$/$dd$",this.dateFormat.yyyymmdd="$yyyy$$mm$$dd$",this.dateFormat["mm/dd/yyyy"]="$mm$/$dd$/$yyyy$",this.dateFormat["mmm dd, yyyy"]="$mmm$ $dd$, $yyyy$",this.dateFormat["dd mmm, yyyy"]="$dd$ $mmm$, $yyyy$",this.dateFormat["dd-mm-yy"]="$dd$-$mm$-$yyyy$",this.dateFormat["dd/mm/yy"]="$dd$/$mm$/$yy$",this.dateFormat["mm-dd-yy"]="$mm$-$dd$-$yy$",this.dateFormat["dd mmm yyyy"]="$dd$ $mmm$ $yyyy$",this.dateFormat["mm/dd/yy"]="$mm$/$dd$/$yy$",this.dateFormat["yyyy-mm-dd"]="$yyyy$-$mm$-$dd$",this.dateFormat["dd mmm 'yy"]="$dd$ $mmm$ '$yy$",this.dateFormat["ddd, mmm dd yyyy"]="$ddd$, $mmm$ $dd$ $yyyy$",this.dateFormat["ddd, dd mmm 'yy"]="$ddd$, $dd$ $mmm$ '$yy$",this.dateFormat["ddd dd mmm, HH:MM AP"]="$ddd$ $dd$ $mmm$, $HH$:$MM$ $AP$",this.dateFormat["ddd dd mmm, hh:MM"]="$ddd$ $dd$ $mmm$, $hh$:$MM$",this.dateFormat["dd mmm yyyy, hh:MM"]="$dd$ $mmm$ $yyyy$, $hh$:$MM$",this.dateFormat["dd mmm, hh:MM"]="$dd$ $mmm$, $hh$:$MM$",this.dateFormat["ddd, dd, mmm yyyy"]="$ddd$, $dd$, $mmm$ $yyyy$",this.dateFormat["hh h:MM m"]="$hh$ h: $MM$ m",this.dateFormat["hh:MM"]="$hh$:$MM$",this.dateFormat["dd mmm"]="$dd$ $mmm$",this.dateFormat["ddd, dd mmm"]="$ddd$, $dd$ $mmm$",this.format=function(date,formatString){this.days=JS_UTIL.translate("weekDaysShortArray",["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]),this.mon=JS_UTIL.translate("monthNamesShortArray",["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]);try{if(date=new Date(date),"Invalid Date"==date)throw"Invalid Date"}catch(e){return{date:"",defaultString:"Invalid Date"}}var AP="AM",MM=JS_UTIL.numPad(date.getMinutes(),2,0),ss=JS_UTIL.numPad(date.getSeconds(),2,0),hh=date.getHours(),fff=date.getMilliseconds(),HH=hh;hh>11&&(HH=hh%12,AP="PM"),0==HH&&(HH=12),HH=JS_UTIL.numPad(HH,2,0),hh=JS_UTIL.numPad(hh,2,0);var dd=JS_UTIL.numPad(date.getDate(),2,0),mm=date.getMonth(),mmm=this.mon[mm];mm=JS_UTIL.numPad(mm+1,2,0);var yyyy=date.getFullYear(),yy=JS_UTIL.numPad(yyyy%100,2,0),ddd=this.days[date.getDay()],defaultString=mm+"/"+dd+"/"+yyyy;if("raw"==formatString)return{date:date,defaultString:defaultString};var template=this.dateFormat[formatString];return void 0==template&&(template=this.dateFormat["dd/mm/yyyy"]),template=new STRING_TEMPLATE(template),template.setAttribute("dd",dd),template.setAttribute("mm",mm),template.setAttribute("mmm",mmm),template.setAttribute("yy",yy),template.setAttribute("yyyy",yyyy),template.setAttribute("ddd",ddd),template.setAttribute("HH",HH),template.setAttribute("hh",hh),template.setAttribute("MM",MM),template.setAttribute("ss",ss),template.setAttribute("AP",AP),template.setAttribute("fff",fff),{date:template.toString(),defaultString:defaultString}},this.strToDateObj=function(_date){var _d=_date.replace(/[- :.\s]/g,",").split(",");return _d[1]-=1,_d.unshift(Date),new(Function.prototype.bind.apply(Date,_d))}},VIA_COLLAPSE=function(collapseContainer,opts){collapseContainer=$(collapseContainer),this.opts=$.extend({},{expand:"",retract:"",errorClass:"viaCollapseError",collapseOthers:!0,openFirst:!0,firstTimeNoScroll:!1},opts||{});var obj=this;this.init=function(){collapseContainer.find(">.via-collapse-blk>.via-collapse-header").each(function(){$(this).click(function(){var headerElement=$(this),headerElementStatus=headerElement.attr("data-collapseVal");obj.opts.collapseOthers&&obj.collapseAll(),obj.collapse(headerElement),"1"==headerElementStatus&&obj.collapseIn(headerElement)})}),obj.collapseAll(),obj.opts.openFirst&&obj.collapseIn(collapseContainer.find(">.via-collapse-blk>.via-collapse-header").first(),obj.opts.firstTimeNoScroll)},this.collapseAll=function(){collapseContainer.find(">.via-collapse-blk>.via-collapse-content").hide(),collapseContainer.find(">.via-collapse-blk>.via-collapse-header").attr("data-collapseVal","1");var controls=collapseContainer.find(">.via-collapse-blk>.via-collapse-header>.via-collapse-control");controls.removeClass(obj.opts.retract),controls.addClass(obj.opts.expand)},this.collapseAllIn=function(){collapseContainer.find(">.via-collapse-blk>.via-collapse-content").show();var headerList=collapseContainer.find(">.via-collapse-blk>.via-collapse-header");headerList.attr("data-collapseVal","0");var controls=collapseContainer.find(">.via-collapse-blk>.via-collapse-header>.via-collapse-control");controls.removeClass(obj.opts.expand),controls.addClass(obj.opts.retract),JS_UTIL.smoothScrollToEl(headerList.first())},this.collapse=function(headerElement){headerElement=$(headerElement),headerElement.attr("data-collapseVal","1"),headerElement.parent().find(">.via-collapse-content").hide();var control=headerElement.find(">.via-collapse-control");control.removeClass(obj.opts.retract),control.addClass(obj.opts.expand)},this.collapseIn=function(headerElement,noScroll){obj.opts.collapseOthers&&obj.collapseAll(),headerElement=$(headerElement),headerElement.attr("data-collapseVal","0"),headerElement.parent().find(">.via-collapse-content").show(),noScroll||JS_UTIL.smoothScrollToEl(headerElement);var control=headerElement.find(">.via-collapse-control");control.removeClass(obj.opts.expand),control.addClass(obj.opts.retract)},this.toggle=function(headerElement){headerElement=$(headerElement);var prevState=headerElement.attr("data-collapseVal");obj.collapse(headerElement),"1"==prevState&&obj.collapseIn(headerElement)},this.toggleError=function(headerElement){$(headerElement).toggleClass(obj.opts.errorClass)},this.addError=function(headerElement,removeOtherErrors){removeOtherErrors&&collapseContainer.find(">.via-collapse-blk>.via-collapse-header").removeClass(obj.opts.errorClass),$(headerElement).addClass(obj.opts.errorClass)},this.removeError=function(headerElement){$(headerElement).removeClass(obj.opts.errorClass)},this.init()};try{window.location.origin=window.location.protocol+"//"+window.location.hostname}catch(e){}try{window.alert=function(){$(".zopim:first-of-type").addClass("hideZopim");var opts=$.extend({autoClose:!0,animateIn:"slideDown",animateOut:"slideUp",css:{top:"0px"}},arguments[1]||{}),alertDiv=$("#viaAlert");alertDiv.length<=0&&(alertDiv=$('<div id="viaAlert" class="viaAlert"><div class="viaAlertCont"><div class="viaAlertMsg"></div></div></div>')),alertDiv.attr("style","");var close=alertDiv.find(".viaAlertClose");close&&close.remove(),opts.autoClose||alertDiv.find(".viaAlertCont").append('<div class="viaAlertClose"></div>');for(i in opts.css)alertDiv.css(i,opts.css[i]);alertDiv.finish(),alertDiv.hide(),alertDiv.find(".viaAlertMsg").html(arguments[0]),$("body").prepend(alertDiv),eval("alertDiv."+opts.animateIn+"('slow')"),opts.autoClose&&setTimeout(function(){eval("alertDiv."+opts.animateOut+"('slow')")},4e3),alertDiv.find(".viaAlertClose").click(function(){eval("alertDiv."+opts.animateOut+"('slow')")})}}catch(e){}try{module.exports.commonUtils={JS_UTIL:JS_UTIL,DATE_FORMATTER:DATE_FORMATTER,PRICE_FORMATTER:PRICE_FORMATTER}}catch(e){}var LOGIN_UTIL=function(opts){var obj=this;obj.opts={errorCallBack:function(){alert(JS_UTIL.translate("Login_Error","Error while login please try again"))},loginCallback:function(){alert(JS_UTIL.translate("Login_Success","Login Successful"),{css:{color:"#12B58A"}}),location.reload(!0)}},this.config=function(){window.fbAsyncInit=function(){FB.init({appId:$("#facebookAppId").val(),cookie:!0,xfbml:!0,version:"v2.2"})},function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];d.getElementById(id)||(js=d.createElement(s),js.id=id,js.src="//connect.facebook.net/en_US/sdk.js",fjs.parentNode.insertBefore(js,fjs))}(document,"script","facebook-jssdk"),$("#loginFacebook").click(function(){obj.fbLogin()}),$("#loginGoogle").click(function(){obj.googleLogin()}),$("#signUpValidate").click(function(){obj.validateSignUp()}),$("#loginValidate").click(function(){obj.validateSignIn()}),$("#loginIdText,#passwordText").keyup(function(event){13==event.keyCode&&$("#loginValidate").click()}),$(".jsSendOtp").click(function(){obj.sendOtp()}),$("#resetPassword").click(function(){obj.updatePass()}),$(".jsInitLoginValid").click(function(){obj.validator&&obj.validator.destroyQtip()}),$("#headerNotif .menuR").first().hover(function(){try{!$("#headerNotif").attr("data-changed")&&parseInt($("#headerNotif .jsNotifCount").html())>0&&AJAX_UTIL.send(JS_UTIL.addAjaxSystemParams("/bdo?action1=VERSIONUPDATE&key="+pageOpts.messageKey+"&versionId="+pageOpts.messageVersionId))}catch(e){console.log(e)}}),$("#headerNotif .menuR").hover(function(){var el=$(this);$("#headerNotif").attr("data-changed","true");var countEl=$("#headerNotif .jsNotifCount");el.hasClass("unreadRow")&&(el.removeClass("unreadRow"),countEl.html(parseInt(countEl.html())-1))}),$("#languageSelector a").click(function(){var el=$(this),selLangKey=el.attr("data-lang-key");el.html();LANGUAGE_SELECT.change(selLangKey)}),$(".jsCustomerNavEl").click(function(e){var element=$(this);obj.validator&&obj.validator.destroyQtip(),$(".jsCustomerNavEl").removeClass("active"),$(".jstopPanels").hide();var targetEl=$("#"+element.attr("id")+"Content");if(targetEl.length>0)return targetEl.find("input[type=text], input[type=password]").each(function(){$(this).val("")}),element.addClass("active"),targetEl.show(),void targetEl.find(".radioCntl").first().prop("checked",!0)}),$(".js-alphaSpace").keydown(function(event){var ExtraCharskeyCodeMap=[8,9,32,35,36,37,38,39,40,46];return event.keyCode>=65&&event.keyCode<=90||event.keyCode>=97&&event.keyCode<=122||$.inArray(event.keyCode,ExtraCharskeyCodeMap)!=-1||void event.preventDefault()}),JS_UTIL.hideElementOnBlur(".jstopPanels",{postFunction:function(){obj.validator&&obj.validator.destroyQtip(),$(".jsCustomerNavEl").removeClass("active")},escapeElements:".jsCustomerNavEl,.viaAlert,.viaAlertClose,.elementPad"}),$("#customer_view_icon").click(function(){$(this).children().children(".iconMyView").hasClass("active")?($(this).children().children(".iconMyView").removeClass("active"),$(".wd").css("width","auto"),$(".nameNBal").css("text-align","right"),$("#customer_view_icon").css({"border-left":"0px","border-bottom-left-radius":"0px"})):($(this).children().children(".iconMyView").addClass("active"),$(".wd").css("width","83%"),$(".nameNBal").css("text-align","left"),$("#customer_view_icon").css({"border-left":"1px solid #e0e5e7","border-bottom-left-radius":"4px"})),$(".hideFromCustomer").css("visibility","hidden"==$(".hideFromCustomer").css("visibility")?"visible":"hidden")}),JS_UTIL.fillIsdDropDown($("#mobileIsdSignUp"));try{var pageOpts=window.pageOpts;if(pageOpts.newLogin){var phone=pageOpts.phone.replace(/^0/,"");/^\+/.test(phone)||(phone="+"+phone)}}catch(e){console.log(e)}},this.mapSignAction=function(code,processReq){var mapAction={1:JS_UTIL.translate("USER_INVALID_MSG","Given user is not valid."),2:JS_UTIL.translate("EMAIL_REG_MSG","Given Email is already registered with us."),3:JS_UTIL.translate("MOB_REG_MSG","Given Mobile is already registered with us."),8:JS_UTIL.translate("EMAIL_MOB_REG_MSG","Given Email and Mobile are already registered with us."),5:JS_UTIL.translate("GEN_LOGIN_MSG","Given username/password invalid."),6:JS_UTIL.translate("AGENT_INVALID_MSG","Invalid Agent ID. Agent Does Not Exist."),7:JS_UTIL.translate("CORP_INVALID_MSG","Corporate Does Not Exist."),9:JS_UTIL.translate("IP_INVALID_MSG","Login is not valid on this IP.")};4!=code?alert(mapAction[code],{autoClose:!1}):(MODAL_PANEL.show($("#activateAccConfirmDiv")),$("#noBtnAct").click(function(e){MODAL_PANEL.hide($("#activateAccConfirmDiv"))}),$("#yesBtnAct").click(function(e){var processCopyReq=$.extend({},processReq);obj.loginToVia(processCopyReq,!0),MODAL_PANEL.hide($("#activateAccConfirmDiv"))}))},this.fbLogin=function(){FB.login(function(response){if(null!=response&&"connected"===response.status){var clientRequestParameters={accessToken:response.authResponse.accessToken,authClient:"FACEBOOK",role:"0"};obj.loginToVia(clientRequestParameters)}else obj.opts.errorCallback()},{scope:"email,public_profile"})},this.googleLogin=function(){var additionalParams={callback:obj.signinCallback,clientid:$("#googleAppid").val(),cookiepolicy:"single_host_origin",scope:"profile email"};gapi.auth.signIn(additionalParams)},this.signinCallback=function(authResult){if(null!=authResult&&1==authResult.status.signed_in&&"PROMPT"==authResult.status.method){var clientRequestParameters=[],clientRequestParameters={accessToken:authResult.access_token,authClient:"GOOGLE",role:"0"};obj.loginToVia(clientRequestParameters)}},this.loginToVia=function(param,activateLogin){var url=JS_UTIL.addAjaxSystemParams("/apiv2/auth/sign-in",{jsonData:!1,addAuthToken:!0});activateLogin&&(url=JS_UTIL.addAjaxSystemParams("/apiv2/auth/activate-login",{jsonData:!0,addAuthToken:!0}));var successHandler=function(result){result.err?(alert(result.err.detail),$("#loginValidate").val(JS_UTIL.translate("Sign_In","SIGN IN."))):obj.loginSuccessFunction(result)},errorHandler=function(result){alert(result.responseJSON.err.detail),$("#loginValidate").val(JS_UTIL.translate("Sign_In","SIGN IN."))},opts={async:!1,params:JSON.stringify(param),type:"POST",success:{handler:successHandler},error:{handler:errorHandler},scope:this,dataType:"json"};$("#loginValidate").val(JS_UTIL.translate("GEN_SIGNING_LABEL","Signing in...")),AJAX_UTIL.send(url,opts)},this.validateSignUp=function(){if(obj.validator||(obj.validator=new VIA_VALIDATOR),obj.validator.init(),obj.validator.addElement("#emailIdSignUp",function(el){return $(el).val($(el).val().trim().toLowerCase()),JS_UTIL.validateEmail($(el).val())},JS_UTIL.translate("ENTER_EMAIL_MSG","Enter valid Email")),obj.validator.addElement("#passwordSignUp",function(el){return JS_UTIL.validatePassword($(el).val())},JS_UTIL.translate("PASS_REQ_MSG","Password must be atleast 8 characters long")),obj.validator.addElement("#nameSignUp",function(el){return $(el).val($(el).val().trim()),/^[a-zA-Z ]+$/.test($(el).val())},JS_UTIL.translate("Enter_Valid_Name","Enter valid name")),obj.validator.addElement("#mobileIsdSignUp","required","Required"),obj.validator.addElement("#mobileNoSignUp",function(el){var isdEl=$("#mobileIsdSignUp"),mob=$(el).val().trim();return $(el).val(mob),JS_UTIL.isStringBlank(mob)?(obj.validator.setMessage(el,"Required"),!1):JS_UTIL.validateMobileStrict(mob,isdEl.val(),isdEl.find("option:selected").attr("data-code"))},JS_UTIL.translate("Enter_Valid_Mobile","Enter Valid Mobile")),obj.validator.validate()){var successHandler=function(result){result.err?alert(result.err.detail):obj.loginSuccessFunction(result)},errorHandler=function(result){alert(result.responseJSON.err.detail)},param={role:"0",mobile:$("#mobileNoSignUp").val().trim(),isdCode:parseInt($("#mobileIsdSignUp").val()),name:$("#nameSignUp").val().trim(),email:$("#emailIdSignUp").val().trim(),pwd:$("#passwordSignUp").val().trim()},url=JS_UTIL.addAjaxSystemParams("/apiv2/auth/sign-up",{jsonData:!1,addAuthToken:!0}),opts={async:!1,params:JSON.stringify(param),type:"POST",success:{handler:successHandler},error:{handler:errorHandler},scope:this,dataType:"json"};AJAX_UTIL.send(url,opts)}},this.validateSignIn=function(){obj.validator||(obj.validator=new VIA_VALIDATOR),obj.validator.init(),obj.validator.addElement("#loginIdText",function(el){return $(el).val($(el).val().trim().toLowerCase()),JS_UTIL.validateEmail($(el).val())},JS_UTIL.translate("ENTER_EMAIL_MSG","Enter valid Email")),obj.validator.addElement("#passwordText",function(el){return JS_UTIL.validatePassword($(el).val())},JS_UTIL.translate("PASS_REQ_MSG","Password must be atleast 8 characters long")),obj.validator.validate()&&obj.loginToVia({pwd:$("#passwordText").val(),emailMobile:$("#loginIdText").val(),role:"0"})},this.sendOtp=function(){obj.validator||(obj.validator=new VIA_VALIDATOR),obj.validator.init();var email=$("#forgotEmail").val().trim();if(isNaN(email)?obj.validator.addElement("#forgotEmail",function(el){return JS_UTIL.validateEmail(email);
},JS_UTIL.translate("ENTER_EMAIL_OR_MOBILE_MSG","Enter valid Email Id or Mobile Number")):obj.validator.addElement("#forgotEmail",function(el){return JS_UTIL.validateMobile(email)},JS_UTIL.translate("ENTER_EMAIL_OR_MOBILE_MSG","Enter valid Email Id or Mobile Number")),!obj.validator.validate())return $("#forgotRadio").prop("checked",!0),void $("#otpRadio").prop("checked",!1);var url=JS_UTIL.addAjaxSystemParams("/apiv2/auth/password/forgot",{jsonData:!1,addAuthToken:!0}),param={emailMobile:email,role:"0"},successHandler=function(result){result.err?alert(result.err.detail,{autoClose:!1}):($("#otpRadio").prop("checked",!0),alert(result.msg,{autoClose:!1}))},errorHandler=function(result){alert(result.responseJSON.err.detail,{autoClose:!1})},opts={async:!1,params:JSON.stringify(param),type:"POST",success:{handler:successHandler},error:{handler:errorHandler},scope:this};AJAX_UTIL.send(url,opts)},this.validateOtp=function(el){var otp=$(el).val().trim();if(!(otp.length<6)){var email=$("#forgotEmail").val().trim(),url=JS_UTIL.addAjaxSystemParams("/apiv2/auth/password/verifyOTP",{jsonData:!1,addAuthToken:!0}),param={emailMobile:email,role:"0",otp:otp},successHandler=function(result){result.msg?($("#newPassword").prop("disabled",!1),$("#newPassword").focus(),$("#resetPassword").prop("disabled",!1)):($("#newPassword").prop("disabled",!0),$("#resetPassword").prop("disabled",!0))},opts={async:!1,params:JSON.stringify(param),type:"POST",success:{handler:successHandler},scope:this};AJAX_UTIL.send(url,opts)}},this.updatePass=function(){obj.validator||(obj.validator=new VIA_VALIDATOR),obj.validator.init();var pass=$("#newPassword").val().trim(),email=$("#forgotEmail").val().trim(),otp=$("#otp").val().trim();if(obj.validator.addElement("#forgotEmail",function(el){var retType=!0;return isNaN(email)?(JS_UTIL.validateEmail(email)||(retType=!1),!0):(JS_UTIL.validateMobile(email)||(retType=!1),!0)},JS_UTIL.translate("ENTER_EMAIL_OR_MOBILE_MSG","Enter valid Email Id or Mobile Number")),obj.validator.addElement("#otp",function(el){return!JS_UTIL.isStringBlank(otp)},JS_UTIL.translate("Enter_OTP","Enter OTP")),obj.validator.addElement("#newPassword",function(el){return JS_UTIL.validatePassword(pass)},JS_UTIL.translate("PASS_REQ_MSG","Password must be atleast 8 characters long")),obj.validator.validate()){var url=JS_UTIL.addAjaxSystemParams("/apiv2/auth/password/reset",{jsonData:!1,addAuthToken:!0}),param={emailMobile:email,role:"0",pwd:pass,otp:otp},successHandler=function(result){result.err?alert(result.err.detail,{autoClose:fasle}):obj.loginSuccessFunction(result)},errorHandler=function(result){alert(result.responseJSON.err.detail,{autoClose:!1})},opts={aysnc:!1,params:JSON.stringify(param),type:"POST",success:{handler:successHandler},error:{handler:errorHandler},scope:this};AJAX_UTIL.send(url,opts)}},this.loginSuccessFunction=function(result){if(window.CT&&result.email){var profile={email:result.email,mobile:"",user_name:""};CT.profile.createProfile(profile)}obj.opts.loginCallback()},this.config()};String.prototype.trunc=String.prototype.trunc||function(n){return this.length>n?this.substr(0,n-1)+"&hellip;":this};var AJAX_UTIL=new function(){this.send=function(url,opts){var defaults={escapeElements:[],headers:{"cache-control":"no-cache"},type:"GET",async:!0,params:{},complete:{},success:{},error:{},dataType:"json"};opts=$.extend({},defaults,opts||{}),opts.headers["Via-Access-Token"]="553f5767-373f-4d98-9e6d-08fa87400a42",opts.cache_maxAge&&(opts.headers["Cache-Control"]="public",opts.headers.Expires=new Date((new Date).getTime()+opts.cache_maxAge).toUTCString()),"json"==opts.dataType&&(opts.headers["Content-Type"]="application/json"),$.ajax({url:url,data:opts.params,type:opts.type,headers:opts.headers,async:opts.async,timeout:opts.timeout,success:function(data){opts.success.handler&&opts.success.handler.call(opts.scope,data)},error:function(data){opts.error.handler&&opts.error.handler.call(opts.scope,data)},complete:function(data){opts.complete.handler&&opts.complete.handler.call(opts.scope,data)}})}},CLEVERTAP=new function(){this.extractFromSearchQuery=function(userQuery){var result={};try{result.src=userQuery.sectorInfos[0].src.code;var dest=userQuery.sectorInfos[0].dest.code,returnType="one-way";return userQuery.sectorInfos.length>1&&!userQuery.multiCity?returnType="return":userQuery.multiCity&&(returnType="multi",dest=userQuery.sectorInfos[userQuery.sectorInfos.length-1].dest.code),result.dest=dest,result.numAdults=userQuery.paxCount.adt,result.numChildren=userQuery.paxCount.chd,result.numInfants=userQuery.paxCount.inf,result.isSeniorCitizen=userQuery.senior,result.isMulticity=userQuery.multicity,result.returnType=returnType,result.isDomestic=userQuery.domestic,$WZRK_WR?(userQuery.sectorInfos.length>1&&(result.returnDate=$WZRK_WR.setDate(DATE_FORMATTER.format(userQuery.sectorInfos[userQuery.sectorInfos.length-1].date,"yyyymmdd").date)),result.departureDate=$WZRK_WR.setDate(DATE_FORMATTER.format(userQuery.sectorInfos[0].date,"yyyymmdd").date)):(userQuery.returnDate&&(result.returnDate="$D_"+DATE_FORMATTER.format(userQuery.sectorInfos[userQuery.sectorInfos.length-1].date,"yyyymmdd").date),result.departureDate="$D_"+DATE_FORMATTER.format(userQuery.sectorInfos[0].date,"yyyymmdd").date),result.classToSearch=userQuery["class"],result}catch(e){return console.log(e),result}}},CHECK_BOOKING_UTIL=function(opts){var obj=this;obj.opts={errorCallBack:function(){alert(JS_UTIL.translate("Retrieve_Booking_Error","Error while login please try again"))}},this.config=function(){$("#checkStatus").click(function(event){event.preventDefault();var valid=!1;obj.validator||(obj.validator=new VIA_VALIDATOR),obj.validator.init(),obj.validator.addElement("#statusFMN","required","Required");var emailOrPhone="";obj.validator.addElement("#emailOrPhone",function(el){return emailOrPhone=$(el).val().trim(),valid=JS_UTIL.validateEmail(emailOrPhone)},JS_UTIL.translate("ENTER_VALID_EMAIL_MSG","Enter Valid Email")),valid=obj.validator.validate(),valid&&JS_UTIL.routeByFlow($("#statusFMN").val().trim())&&$(this).parents("form").submit()}),$("#emailOrPhone").keydown(function(){obj.showHideISD(this)}),$("#emailOrPhone").blur(function(){obj.showHideISD(this)}),JS_UTIL.fillIsdDropDown($("#mobileIsdBookingCheck"))},this.showHideISD=function(el){/^[a-zA-Z]{1}/.test($(el).val().trim())?$("#ISDCode").hide():$("#ISDCode").show()},this.config()},VIA_VALIDATOR=function(initFunction,postFunction,initOpts,dontBreak){var that=this;this.dontBreak=dontBreak,this.active=!1,this.currentEl="",this.elementValidatorPair={},this.validate=function(){var initResult={};that.initFunction&&(initResult=that.initFunction(that.initOpts));var temp=void 0;for(var i in that.elementValidatorPair)if(!that.validatorFn(i,initResult)){temp=i;break}if(that.elementValidatorPair[temp])var targetString=that.elementValidatorPair[temp].opts.target,messageString=that.elementValidatorPair[temp].message;else var targetString="",messageString="";if(that.elementValidatorPair[that.currentEl]){var prevTargetString=that.elementValidatorPair[that.currentEl].opts.target;that.elementValidatorPair[that.currentEl].message}else var prevTargetString="";if(temp){var elObj=that.elementValidatorPair[temp];return that.postFunction&&that.postFunction(targetString,$.extend({},that.initOpts||{},elObj.opts||{})),elObj.opts.focus&&JS_UTIL.smoothScrollToEl(elObj.opts.target,!0),jQuery(prevTargetString).qtip("destroy",!0),that.currentEl=temp,jQuery(targetString).qtip({content:messageString,show:{ready:!0,solo:!0},hide:{event:!1},position:{my:"bottom center",at:"top center"},events:{move:function(event,api){$(api.elements.tooltip).show();var result=api.elements.target.is(":hidden");result&&$(api.elements.tooltip).hide()}}}),jQuery(that.currentEl).one("change",that.validate),!1}return jQuery(prevTargetString).qtip("destroy",!0),that.currentEl="",!0},this.setTarget=function(el,targetSel){that.elementValidatorPair[el]&&(that.elementValidatorPair[el].opts.target=targetSel)},this.setMessage=function(el,message){that.elementValidatorPair[el]&&(that.elementValidatorPair[el].message=message)},this.addElement=function(el,condition,message,opts){return $(el).length<=0?that:(condition=condition||"required",message=message||JS_UTIL.translate("GEN_REQUIRED_LABEL","Required"),opts=$.extend({},{focus:!0,target:el},opts||{}),that.elementValidatorPair[el]={selector:el,validator:condition,message:message,opts:opts},that)},this.validatorFn=function(el,initResult){var elObj=that.elementValidatorPair[el];$(elObj.opts.target).removeClass("validatorError");var returnVal=!1;if("required"==elObj.validator){var value=$(el).val();returnVal=value&&!JS_UTIL.isStringBlank(value.trim())}else if("function"==typeof elObj.validator){var opts=$.extend({},initResult||{},elObj.opts||{});returnVal=elObj.validator(el,opts)}return!returnVal&&$(elObj.opts.target).addClass("validatorError"),returnVal},this.destroyQtip=function(){that.elementValidatorPair[that.currentEl]&&jQuery(this.elementValidatorPair[that.currentEl].opts.target).qtip("destroy",!0)},this.init=function(initFunction,postFunction,initOpts){return that.destroyQtip(),that.currentEl="",that.elementValidatorPair={},that.active=!1,that.initFunction=initFunction,that.postFunction=postFunction,that.initOpts=initOpts,that},this.init(initFunction,postFunction,initOpts)};$(".feedBackForm").on("click",function(){MODAL_PANEL.show("#feedBackSubmitForm ",{closeButton:!0})}),$(".starVoted > i ").on("click",function(e){var vote_type=$(this).attr("data-vote-type"),el=$('.starVoted > i[data-vote-type="'+vote_type+'"]');$(el).prevAll().andSelf().removeClass("fe-star-o").addClass("fe-star");var faq=$("<div>");$(el).nextAll().removeClass("fe-star").addClass("fe-star-o"),1==vote_type||2==vote_type?faq.append("<div class='faq faq"+vote_type+"' >"+languageBundle.Star_Rating_Poor+"</div><textarea class='userTxtArea u_width94 mrgn-top10 mrgn-botm10 feedBackResponse"+vote_type+"' rows=8  name=feedBackResponse"+vote_type+" value=''></textarea>"):3==vote_type?faq.append("<div class='faq faq"+vote_type+"' >"+languageBundle.Star_Rating_Average+"</div><textarea class='userTxtArea u_width94 mrgn-top10 mrgn-botm10 feedBackResponse"+vote_type+"' rows=8 name=feedBackResponse"+vote_type+" value=''></textarea>"):faq.append("<div class='faq faq"+vote_type+"'>"+languageBundle.Star_Rating_Good+"</div><textarea class='userTxtArea mrgn-top10 u_width94 mrgn-botm10 feedBackResponse"+vote_type+"' rows=8 name=feedBackResponse "+vote_type+" value=''></textarea>"),$("input[name=rating]").val(vote_type),$(".starRatingFaq").html(faq)}),$(".fbCancel").on("click",function(e){$(".hiddenParams").find("input").val(""),$(".fbUserForm").find("input").val(""),$(".starRatingFaq").html(""),$(".starVoted").children().removeClass("fe-star").addClass("fe-star-o"),MODAL_PANEL.hide()}),$(".fbSubmit").on("click",function(e){var validateName=$("#feedBackSubmitForm .fbUserName").val(),validateEmail=$("#feedBackSubmitForm .fbEmailId").val(),feedback=$("input[name=rating]").val(),feedBackText=$(".feedBackResponse"+feedback).val();$("input[name=feedback]").val(feedBackText);var pageLocation=location.pathname;$("input[name=pageUrl]").val(pageLocation);var fBoxValidator=new VIA_VALIDATOR;return fBoxValidator.addElement("#feedBackSubmitForm .starVoted",function(){return""!=$("input[name=rating]").val()}),!!fBoxValidator.validate()&&($("input[name=userMailid]").val(validateEmail),$("input[name=userName]").val(validateName),void feedBackForm())}),$("#switchToOldSite").click(function(){var url=JS_UTIL.addAjaxSystemParams("/apiv2/common/switch-ui/old",{jsonData:!1,addAuthToken:!0}),successHandler=function(response){response.success&&(alert(response.msg),location.href="/")},errorHandler=function(err){},opts={timeout:1e4,success:{handler:successHandler},error:{handler:errorHandler},scope:this,dataType:"json",type:"GET"};AJAX_UTIL.send(url,opts)}),$(document).on("keyup",function(e){27===e.keyCode&&$(".via-calender").hide()});var countryList={countriesInfo:{1:{code:"AF",name:"Afghanistan",phonecode:93,id:1},2:{code:"AX",zipcoderegex:"22d{3}",name:"Aland Islands",phonecode:0,id:2},3:{code:"AL",name:"Albania",phonecode:355,id:3},4:{code:"DZ",zipcoderegex:"d{5}",name:"Algeria",phonecode:213,id:4},5:{code:"AD",zipcoderegex:"ADd{3}",name:"Andorra",phonecode:376,id:5},6:{code:"AO",name:"Angola",phonecode:244,id:6},7:{code:"AI",name:"Anguilla",phonecode:1264,id:7},8:{code:"AQ",name:"Antartica",phonecode:0,id:8},9:{code:"AG",name:"Antigua And Barbuda",phonecode:1268,id:9},10:{code:"AR",zipcoderegex:"([A-HJ-NP-Z])?d{4}([A-Z]{3})?",name:"Argentina",phonecode:54,id:10},11:{code:"AM",zipcoderegex:"(37)?d{4}",name:"Armenia",phonecode:374,id:11},12:{code:"AW",name:"Aruba",phonecode:297,id:12},13:{code:"SH",zipcoderegex:"(ASCN|STHL) 1ZZ",name:"Ascension Island/St. Helena",phonecode:290,id:13},14:{code:"AU",zipcoderegex:"d{4}",name:"Australia",phonecode:61,id:14},15:{code:"AT",zipcoderegex:"d{4}",name:"Austria",phonecode:43,id:15},16:{code:"AZ",zipcoderegex:"d{4}",name:"Azerbaijan",phonecode:994,id:16},17:{code:"BS",name:"Bahamas",phonecode:1242,id:17},18:{code:"BH",zipcoderegex:"((1[0-2]|[2-9])d{2})?",name:"Bahrain",phonecode:973,id:18},19:{code:"BD",zipcoderegex:"d{4}",name:"Bangladesh",phonecode:880,id:19},20:{code:"BB",zipcoderegex:"(BBd{5})?",name:"Barbados",phonecode:1246,id:20},21:{code:"BY",zipcoderegex:"d{6}",name:"Belarus",phonecode:375,id:21},22:{code:"BE",zipcoderegex:"d{4}",name:"Belgium",phonecode:32,id:22},23:{code:"BZ",name:"Belize",phonecode:501,id:23},24:{code:"BJ",name:"Benin",phonecode:229,id:24},25:{code:"BM",zipcoderegex:"[A-Z]{2}[ ]?[A-Z0-9]{2}",name:"Bermuda",phonecode:1441,id:25},26:{code:"BT",name:"Bhutan",phonecode:975,id:26},27:{code:"BO",name:"Bolivia",phonecode:591,id:27},28:{code:"BA",zipcoderegex:"d{5}",name:"Bosnia Herzegovina",phonecode:387,id:28},29:{code:"BW",name:"Botswana",phonecode:267,id:29},30:{code:"BV",name:"Bouvet Island",phonecode:0,id:30},31:{code:"BR",zipcoderegex:"d{5}[-]?d{3}",name:"Brazil",phonecode:55,id:31},32:{code:"IO",zipcoderegex:"BBND 1ZZ",name:"British Indian Ocean Territory",phonecode:246,id:32},33:{code:"VG",name:"British Virgin Islands",phonecode:1284,id:33},34:{code:"BN",zipcoderegex:"[A-Z]{2}[ ]?d{4}",name:"Brunei",phonecode:673,id:34},35:{code:"BG",zipcoderegex:"d{4}",name:"Bulgaria",phonecode:359,id:35},36:{code:"BF",name:"Burkina Faso",phonecode:226,id:36},37:{code:"BI",name:"Burundi",phonecode:257,id:37},38:{code:"KH",zipcoderegex:"d{5}",name:"Cambodia",phonecode:855,id:38},39:{code:"CM",name:"Cameroon, United Republic Of",phonecode:237,id:39},40:{code:"CA",zipcoderegex:"[ABCEGHJKLMNPRSTVXY]d[ABCEGHJ-NPRSTV-Z][ ]?d[ABCEGHJ-NPRSTV-Z]d",name:"Canada",phonecode:1,id:40},41:{code:"CV",zipcoderegex:"d{4}",name:"Cape Verde, Republic Of",phonecode:238,id:41},42:{code:"KY",name:"Cayman Islands",phonecode:1345,id:42},43:{code:"CF",name:"Central African Republic",phonecode:236,id:43},44:{code:"TD",name:"Chad",phonecode:235,id:44},45:{code:"CL",zipcoderegex:"d{7}",name:"Chile",phonecode:56,id:45},46:{code:"CN",zipcoderegex:"d{6}",name:"China",phonecode:86,id:46},47:{code:"CX",zipcoderegex:"6798",name:"Christmas Island",phonecode:61,id:47},48:{code:"CC",zipcoderegex:"6799",name:"Cocos Islands",phonecode:672,id:48},49:{code:"CO",name:"Colombia",phonecode:57,id:49},50:{code:"KM",name:"Comoros",phonecode:269,id:50},51:{code:"CG",name:"Congo",phonecode:242,id:51},52:{code:"CD",name:"Congo Democratic Republic Of",phonecode:242,id:52},53:{code:"CK",zipcoderegex:"d{4}",name:"Cook Islands",phonecode:682,id:53},54:{code:"CR",zipcoderegex:"d{4,5}|d{3}-d{4}",name:"Costa Rica",phonecode:506,id:54},55:{code:"HR",zipcoderegex:"d{5}",name:"Croatia",phonecode:385,id:55},56:{code:"CU",name:"Cuba",phonecode:53,id:56},57:{code:"CY",zipcoderegex:"d{4}",name:"Cyprus",phonecode:357,id:57},58:{code:"CZ",zipcoderegex:"d{3}[ ]?d{2}",name:"Czech Republic",phonecode:420,id:58},59:{code:"DK",zipcoderegex:"d{4}",name:"Denmark",phonecode:45,id:59},60:{code:"DJ",name:"Djibouti",phonecode:253,id:60},61:{code:"DM",name:"Dominica",phonecode:1767,id:61},62:{code:"DO",zipcoderegex:"d{5}",name:"Dominican Republic",phonecode:1809,id:62},63:{code:"EC",zipcoderegex:"([A-Z]d{4}[A-Z]|(?:[A-Z]{2})?d{6})?",name:"Ecuador",phonecode:593,id:63},64:{code:"EG",zipcoderegex:"d{5}",name:"Egypt",phonecode:20,id:64},65:{code:"SV",name:"El Salvador",phonecode:503,id:65},66:{code:"GQ",name:"Equatorial Guinea",phonecode:240,id:66},67:{code:"ER",name:"Eritrea",phonecode:291,id:67},68:{code:"EE",zipcoderegex:"d{5}",name:"Estonia",phonecode:372,id:68},69:{code:"ET",zipcoderegex:"d{4}",name:"Ethiopia",phonecode:251,id:69},70:{code:"IN",zipcoderegex:"d{6}",name:"India",phonecode:91,id:70},71:{code:"FO",zipcoderegex:"d{3}",name:"Faeroe Islands",phonecode:298,id:71},72:{code:"FK",zipcoderegex:"FIQQ 1ZZ",name:"Falkland Islands",phonecode:500,id:72},73:{code:"FJ",name:"Fiji Islands",phonecode:679,id:73},74:{code:"FI",zipcoderegex:"d{5}",name:"Finland",phonecode:358,id:74},75:{code:"FR",zipcoderegex:"d{2}[ ]?d{3}",name:"France",phonecode:33,id:75},76:{code:"GF",zipcoderegex:"9[78]3d{2}",name:"French Guiana",phonecode:594,id:76},77:{code:"PF",zipcoderegex:"987d{2}",name:"French Polynesia",phonecode:689,id:77},78:{code:"TF",name:"French Southern Territories",phonecode:0,id:78},79:{code:"GA",name:"Gabon",phonecode:241,id:79},80:{code:"GM",name:"Gambia",phonecode:220,id:80},81:{code:"GE",zipcoderegex:"d{4}",name:"Georgia",phonecode:995,id:81},82:{code:"DE",zipcoderegex:"d{5}",name:"Germany",phonecode:49,id:82},83:{code:"GH",name:"Ghana",phonecode:233,id:83},84:{code:"GI",name:"Gibraltar",phonecode:350,id:84},85:{code:"GR",zipcoderegex:"d{3}[ ]?d{2}",name:"Greece",phonecode:30,id:85},86:{code:"GL",zipcoderegex:"39d{2}",name:"Greenland",phonecode:299,id:86},87:{code:"GD",name:"Grenada",phonecode:1473,id:87},88:{code:"GP",zipcoderegex:"9[78][01]d{2}",name:"Guadeloupe",phonecode:590,id:88},89:{code:"GU",zipcoderegex:"969[123]d([ -]d{4})?",name:"Guam",phonecode:1671,id:89},90:{code:"GT",zipcoderegex:"d{5}",name:"Guatemala",phonecode:502,id:90},91:{code:"GG",zipcoderegex:"GYd[dA-Z]?[ ]?d[ABD-HJLN-UW-Z]{2}",name:"Guernsey",phonecode:0,id:91},92:{code:"GN",zipcoderegex:"d{3}",name:"Guinea",phonecode:224,id:92},93:{code:"GW",zipcoderegex:"d{4}",name:"Guinea Bissau",phonecode:245,id:93},94:{code:"GY",name:"Guyana",phonecode:592,id:94},95:{code:"HT",zipcoderegex:"d{4}",name:"Haiti",phonecode:509,id:95},96:{code:"HM",zipcoderegex:"d{4}",name:"Heard Island and McDonald Islands",phonecode:0,id:96},97:{code:"HN",zipcoderegex:"(?:d{5})?",name:"Honduras",phonecode:504,id:97},98:{code:"HK",name:"Hong Kong",phonecode:852,id:98},99:{code:"HU",zipcoderegex:"d{4}",name:"Hungary",phonecode:36,id:99},100:{code:"IS",zipcoderegex:"d{3}",name:"Iceland",phonecode:354,id:100},101:{code:"ID",zipcoderegex:"d{5}",name:"Indonesia",phonecode:62,id:101},102:{code:"IN",zipcoderegex:"d{6}",name:"India",phonecode:91,id:102},103:{code:"IQ",zipcoderegex:"d{5}",name:"Iraq",phonecode:964,id:103},104:{code:"IE",name:"Ireland, Republic Of",phonecode:353,id:104},105:{code:"IM",zipcoderegex:"IMd[dA-Z]?[ ]?d[ABD-HJLN-UW-Z]{2}",name:"Isle Of Man",phonecode:0,id:105},106:{code:"IL",zipcoderegex:"d{5}",name:"Israel",phonecode:972,id:106},107:{code:"IT",zipcoderegex:"d{5}",name:"Italy",phonecode:39,id:107},108:{code:"CI",name:"Ivory Coast",phonecode:225,id:108},109:{code:"JM",name:"Jamaica",phonecode:1876,id:109},110:{code:"JP",zipcoderegex:"d{3}-d{4}",name:"Japan",phonecode:81,id:110},111:{code:"JE",zipcoderegex:"JEd[dA-Z]?[ ]?d[ABD-HJLN-UW-Z]{2}",name:"Jersey Island",phonecode:0,id:111},112:{code:"JO",zipcoderegex:"d{5}",name:"Jordan",phonecode:962,id:112},113:{code:"KZ",zipcoderegex:"d{6}",name:"Kazakstan",phonecode:7,id:113},114:{code:"KE",zipcoderegex:"d{5}",name:"Kenya",phonecode:254,id:114},115:{code:"KI",name:"Kiribati",phonecode:686,id:115},116:{code:"KP",name:"Korea, Democratic Peoples Republic",phonecode:850,id:116},117:{code:"KR",zipcoderegex:"d{3}[-]d{3}",name:"Korea, Republic Of",phonecode:82,id:117},118:{code:"KW",zipcoderegex:"d{5}",name:"Kuwait",phonecode:965,id:118},119:{code:"KG",zipcoderegex:"d{6}",name:"Kyrgyzstan",phonecode:996,id:119},120:{code:"LA",zipcoderegex:"d{5}",name:"Lao, People's Dem. Rep.",phonecode:856,id:120},121:{code:"LV",zipcoderegex:"d{4}",name:"Latvia",phonecode:371,id:121},122:{code:"LB",zipcoderegex:"(d{4}([ ]?d{4})?)?",name:"Lebanon",phonecode:961,id:122},123:{code:"LS",zipcoderegex:"d{3}",name:"Lesotho",phonecode:266,id:123},124:{code:"LR",zipcoderegex:"d{4}",name:"Liberia",phonecode:231,id:124},125:{code:"LY",name:"Libyan Arab Jamahiriya",phonecode:218,id:125},126:{code:"LI",zipcoderegex:"(948[5-9])|(949[0-7])",name:"Liechtenstein",phonecode:423,id:126},127:{code:"LT",zipcoderegex:"d{5}",name:"Lithuania",phonecode:370,id:127},128:{code:"LU",zipcoderegex:"d{4}",name:"Luxembourg",phonecode:352,id:128},129:{code:"MO",name:"Macau",phonecode:853,id:129},130:{code:"MK",zipcoderegex:"d{4}",name:"Macedonia",phonecode:389,id:130},131:{code:"MG",zipcoderegex:"d{3}",name:"Madagascar (Malagasy)",phonecode:261,id:131},132:{code:"MW",name:"Malawi",phonecode:265,id:132},133:{code:"MY",zipcoderegex:"d{5}",name:"Malaysia",phonecode:60,id:133},134:{code:"MV",zipcoderegex:"d{5}",name:"Maldives",phonecode:960,id:134},135:{code:"ML",name:"Mali",phonecode:223,id:135},136:{code:"MT",zipcoderegex:"[A-Z]{3}[ ]?d{2,4}",name:"Malta",phonecode:356,id:136},137:{code:"MP",zipcoderegex:"9695[012]([ -]d{4})?",name:"Marianna Islands",phonecode:1670,id:137},138:{code:"MH",zipcoderegex:"969[67]d([ -]d{4})?",name:"Marshall Islands",phonecode:692,id:138},139:{code:"MQ",zipcoderegex:"9[78]2d{2}",name:"Martinique",phonecode:596,id:139},140:{code:"MR",name:"Mauritania",phonecode:222,id:140},141:{code:"MU",zipcoderegex:"(d{3}[A-Z]{2}d{3})?",name:"Mauritius",phonecode:230,id:141},142:{code:"YT",zipcoderegex:"976d{2}",name:"Mayotte",phonecode:269,id:142},143:{code:"MX",zipcoderegex:"d{5}",name:"Mexico",phonecode:52,id:143},144:{code:"FM",zipcoderegex:"(9694[1-4])([ -]d{4})?",name:"Micronesia",phonecode:691,id:144},145:{code:"MD",zipcoderegex:"d{4}",name:"Moldova",phonecode:373,id:145},146:{code:"MC",zipcoderegex:"980d{2}",name:"Monaco",phonecode:377,id:146},147:{code:"MN",zipcoderegex:"d{6}",name:"Mongolia",phonecode:976,id:147},148:{code:"ME",zipcoderegex:"8d{4}",name:"Montenegro",phonecode:0,id:148},149:{code:"MS",name:"Montserrat",phonecode:1664,id:149},150:{code:"MA",zipcoderegex:"d{5}",name:"Morocco",phonecode:212,id:150},151:{code:"MZ",name:"Mozambique",phonecode:258,id:151},152:{code:"MM",name:"Myanmar",phonecode:95,id:152},153:{code:"NA",name:"Namibia",phonecode:264,id:153},154:{code:"NR",name:"Nauru",phonecode:674,id:154},155:{code:"NP",zipcoderegex:"d{5}",name:"Nepal",phonecode:977,id:155},156:{code:"AN",name:"Netherland Antilles",phonecode:599,id:156},157:{code:"NL",zipcoderegex:"d{4}[ ]?[A-Z]{2}",name:"Netherlands",phonecode:31,id:157},158:{code:"NC",zipcoderegex:"988d{2}",name:"New Caledonia",phonecode:687,id:158},159:{code:"NZ",zipcoderegex:"d{4}",name:"New Zealand",phonecode:64,id:159},160:{code:"NI",zipcoderegex:"((d{4}-)?d{3}-d{3}(-d{1})?)?",name:"Nicaragua",phonecode:505,id:160},161:{code:"NE",zipcoderegex:"d{4}",name:"Niger",phonecode:227,id:161},162:{code:"NG",zipcoderegex:"(d{6})?",name:"Nigeria",phonecode:234,id:162},163:{code:"NU",name:"Niue",phonecode:683,id:163},164:{code:"NF",zipcoderegex:"2899",name:"Norfolk Island",phonecode:672,id:164},165:{code:"NO",zipcoderegex:"d{4}",name:"Norway",phonecode:47,id:165},166:{code:"PS",name:"Occupied Palestinian Territory",phonecode:970,id:166},167:{code:"OM",zipcoderegex:"(PC )?d{3}",name:"Oman, Sultanate Of",phonecode:968,id:167},168:{code:"PK",zipcoderegex:"d{5}",name:"Pakistan",phonecode:92,id:168},169:{code:"PW",zipcoderegex:"96940",name:"Palau",phonecode:680,id:169},170:{code:"PA",name:"Panama",phonecode:507,id:170},171:{code:"PG",zipcoderegex:"d{3}",name:"Papua New Guinea (Niugini)",phonecode:675,id:171},172:{code:"PY",zipcoderegex:"d{4}",name:"Paraguay",phonecode:595,id:172},173:{code:"PE",name:"Peru",phonecode:51,id:173},174:{code:"PH",zipcoderegex:"d{4}",name:"Philippines",phonecode:63,id:174},175:{code:"PN",zipcoderegex:"PCRN 1ZZ",name:"Pitcairn",phonecode:0,id:175},176:{code:"PL",zipcoderegex:"d{2}-d{3}",name:"Poland",phonecode:48,id:176},177:{code:"PT",zipcoderegex:"d{4}([-]d{3})?",name:"Portugal",phonecode:351,id:177},178:{code:"QA",name:"Qatar",phonecode:974,id:178},179:{code:"RE",zipcoderegex:"9[78]4d{2}",name:"Reunion",phonecode:262,id:179},180:{code:"RO",zipcoderegex:"d{6}",name:"Romania",phonecode:40,id:180},181:{code:"RU",zipcoderegex:"d{6}",name:"Russian Federation",phonecode:70,id:181},182:{code:"RW",name:"Rwanda",phonecode:250,id:182},183:{code:"LC",name:"Saint Lucia",phonecode:1758,id:183},184:{code:"VC",name:"Saint Vincent And The Grenadines",phonecode:1784,id:184},185:{code:"AS",zipcoderegex:"96799",name:"Samoa, American",phonecode:1684,id:185},186:{code:"WS",name:"Samoa, Independent State Of",phonecode:684,id:186},187:{code:"SM",zipcoderegex:"4789d",name:"San Marino",phonecode:378,id:187},188:{code:"ST",name:"Sao Tome and Principe",phonecode:239,id:188},189:{code:"SA",zipcoderegex:"d{5}",name:"Saudi Arabia",phonecode:966,id:189},190:{code:"SN",zipcoderegex:"d{5}",name:"Senegal",phonecode:221,id:190},191:{code:"RS",zipcoderegex:"d{6}",name:"Serbia",phonecode:0,id:191},192:{code:"CS",zipcoderegex:"d{5}",name:"Serbia And Montenegro",phonecode:381,id:192},193:{code:"SC",name:"Seychelles Islands",phonecode:248,id:193},194:{code:"SL",name:"Sierra Leone",phonecode:232,id:194},195:{code:"SG",zipcoderegex:"d{6}",name:"Singapore",phonecode:65,id:195},196:{code:"SK",zipcoderegex:"d{3}[ ]?d{2}",name:"Slovakia",phonecode:421,id:196},197:{code:"SI",zipcoderegex:"d{4}",name:"Slovenia",phonecode:386,id:197},198:{code:"SB",name:"Solomon Islands",phonecode:677,id:198},199:{code:"SO",zipcoderegex:"d{5}",name:"Somalia",phonecode:252,id:199},200:{code:"ZA",zipcoderegex:"d{4}",name:"South Africa",phonecode:27,id:200},201:{code:"GS",zipcoderegex:"SIQQ 1ZZ",name:"South Georgia And S Sandwich Island",phonecode:0,id:201},202:{code:"ES",zipcoderegex:"d{5}",name:"Spain",phonecode:34,id:202},203:{code:"LK",zipcoderegex:"d{5}",name:"Sri Lanka",phonecode:94,id:203},204:{code:"KN",name:"St. Kitts - Nevis",phonecode:1869,id:204},205:{code:"PM",zipcoderegex:"9[78]5d{2}",name:"St. Pierre and Miquelon",phonecode:508,id:205},206:{code:"SD",name:"Sudan",phonecode:249,id:206},207:{code:"SR",name:"Suriname",phonecode:597,id:207},208:{code:"SJ",zipcoderegex:"d{4}",name:"Svalbard And Jan Mayen Is",phonecode:47,id:208},209:{code:"SZ",zipcoderegex:"[HLMS]d{3}",name:"Swaziland",phonecode:268,id:209},210:{code:"SE",zipcoderegex:"d{3}[ ]?d{2}",name:"Sweden",phonecode:46,id:210},211:{code:"CH",zipcoderegex:"d{4}",name:"Switzerland",phonecode:41,id:211},212:{code:"SY",name:"Syrian Arab Rep.",phonecode:963,id:212},213:{code:"TW",zipcoderegex:"d{3}(d{2})?",name:"Taiwan, Republic of China",phonecode:886,id:213},214:{code:"TJ",zipcoderegex:"d{6}",name:"Tajikistan",phonecode:992,id:214},215:{code:"TZ",name:"Tanzania",phonecode:255,id:215},216:{code:"TH",zipcoderegex:"d{5}",name:"Thailand",phonecode:66,id:216},217:{code:"TL",name:"Timor Leste",phonecode:670,id:217},218:{code:"TG",name:"Togo",phonecode:228,id:218},219:{code:"TK",name:"Tokelau",phonecode:690,id:219},220:{code:"TO",name:"Tonga",phonecode:676,id:220},221:{code:"TT",name:"Trinidad and Tobago",phonecode:1868,id:221},222:{code:"TN",zipcoderegex:"d{4}",name:"Tunisia",phonecode:216,id:222},223:{code:"TR",zipcoderegex:"d{5}",name:"Turkey",phonecode:90,id:223},224:{code:"TM",zipcoderegex:"d{6}",name:"Turkmenistan",phonecode:7370,id:224},225:{code:"TC",zipcoderegex:"TKCA 1ZZ",name:"Turks And Caicos Islands",phonecode:1649,id:225},226:{code:"TV",name:"Tuvalu",phonecode:688,id:226},227:{code:"UG",name:"Uganda",phonecode:256,id:227},228:{code:"UA",zipcoderegex:"d{5}",name:"Ukraine",phonecode:380,id:228},229:{code:"AE",name:"United Arab Emirates",phonecode:971,id:229},230:{code:"GB",name:"United Kingdom",phonecode:44,id:230},231:{code:"US",zipcoderegex:"d{5}([ -]d{4})?",name:"United States",phonecode:1,id:231},232:{code:"UM",name:"United States Minor Outlying Islnds",phonecode:1,id:232},233:{code:"UY",zipcoderegex:"d{5}",name:"Uruguay",phonecode:598,id:233},234:{code:"UZ",zipcoderegex:"d{6}",name:"Uzbekistan Sum",phonecode:998,id:234},235:{code:"VU",name:"Vanuatu",phonecode:678,id:235},236:{code:"VA",zipcoderegex:"120",name:"Vatican City State",phonecode:39,id:236},237:{code:"VE",zipcoderegex:"d{4}",name:"Venezuela",phonecode:58,id:237},238:{code:"VN",name:"Vietnam",phonecode:84,id:238},239:{code:"WF",zipcoderegex:"986d{2}",name:"Wallis and Futuna Islands",phonecode:681,id:239},240:{code:"EH",name:"Western Sahara",phonecode:212,id:240},241:{code:"YE",name:"Yemen, Republic Of",phonecode:967,id:241},242:{code:"YU",zipcoderegex:"d{5}",name:"Yugoslavia",phonecode:0,id:242},243:{code:"ZM",zipcoderegex:"d{5}",name:"Zambia",phonecode:260,id:243},244:{code:"ZW",name:"Zimbabwe",phonecode:263,id:244},245:{code:"IR",name:"Iran",phonecode:98,id:245}}};try{module.exports.countryList=countryList}catch(e){console.log(e)}+function(window,undefined,$,mdp,Validator,jsUtil){function OTPModule(){this.inputVal="",this.inputOTP="",this.OTPVerified=!1,this.receiver=""}function showErrorTip(){setTimeout(function(){$("div[id^='qtip-']").css({"z-index":9e8})},300)}function hideErrorTip(){$("#otpEmailInput, #otpVerifiedInput").qtip("destroy")}var entryHTML="",exitHTML="",noop=function(){},mdpHide=mdp.hide;mdp.hide=function(opts){hideErrorTip(),mdpHide()},OTPModule.prototype={init:function(config){var modalPanels=$($("#otpModalModule").html());entryHTML=modalPanels[0],exitHTML=modalPanels[modalPanels.length-1],this.reset(),this.otpEntryUrl="string"==typeof config.otpEntryUrl?config.otpEntryUrl:"",this.otpValidateUrl="string"==typeof config.otpValidateUrl?config.otpValidateUrl:"",this.successFn="function"==typeof config.successFn?config.successFn:noop,this.errorFn="function"==typeof config.errorFn?config.errorFn:noop,this.resendOTP="function"==typeof config.resendOTPFn?config.resendOTPFn:this.sendOTP,this.receiver=parseInt(config.otpReceiver,10)},showOTPInputModal:function(){var $container;mdp.show(entryHTML,{closeButton:!0,closeBody:!0}),$container=$(".modalPanelContainer"),$container.width("50%"),this.bindInputEvents($container)},showOTPConfirmModal:function(){var $container;mdp.show(exitHTML,{closeButton:!0,closeBody:!0}),$container=$(".modalPanelContainer"),$container.width("50%"),this.bindAuthEvents($container)},bindInputEvents:function($container){var _this=this;$container.one("click","#submitOTP",function(event){var $inputEl=$("#otpEmailInput");$("#submitOTP");_this.inputVal=$inputEl.val(),_this.processInput()})},bindAuthEvents:function($container){var _this=this;$container.on("click","#verifyOTP",function(event){var $inputEl=$("#otpVerifiedInput");$("#verifyOTP");_this.inputOTP=$inputEl.val(),_this.processOTP()}),$container.on("click","#resendOTP",function(event){_this.resendOTP()})},processInput:function(){var emailMobile=this.inputVal.toString().trim(),isEmail=isNaN(parseInt(emailMobile,10)),validatorFn=function(el){return isEmail?jsUtil.validateEmail(emailMobile):jsUtil.validateMobile(emailMobile)},errorString=jsUtil.translate("ENTER_EMAIL_OR_MOBILE_MSG","Enter valid Email Id or Mobile Number");return this.validator=new Validator,this.validator.init(),this.validator.addElement("#otpEmailInput",validatorFn,errorString),this.validator.validate()?this.sendOTP():(showErrorTip(),!1)},processOTP:function(){var OTP=this.inputOTP.toString().trim(),validatorFn=function(el){return 6===OTP.length&&!isNaN(parseInt(OTP,10))},errorString=jsUtil.translate("ENTER_VALID_OTP_MSG","Enter a valid OTP");if(this.validator=new Validator,this.validator.init(),this.validator.addElement("#otpVerifiedInput",validatorFn,errorString),this.validator.validate()){var url=jsUtil.addAjaxSystemParams(this.otpValidateUrl.replace("$$otp$$",OTP),{
jsonData:!1,addAuthToken:!0}),param={otp:OTP,emailMobile:"number"==typeof this.receiver?this.receiver:0,role:0},successHandler=function(res){hideErrorTip(),mdp.hide(),this.OTPVerified=!0,this.successFn(res)},errorHandler=function(err){this.errorFn(err)},opts={async:!0,params:JSON.stringify(param),type:"GET",success:{handler:successHandler},error:{handler:errorHandler},scope:this};return AJAX_UTIL.send(url,opts),!0}return showErrorTip(),!1},sendOTP:function(){var url=jsUtil.addAjaxSystemParams(this.otpEntryUrl,{jsonData:!1,addAuthToken:!0}),param={emailMobile:this.inputVal.toString().trim(),role:"0"},successHandler=function(result){result.err?alert(result.err.detail,{autoClose:!1}):result.success?(alert(jsUtil.translate("OTP_SENT_MSG_ON_MOB","One Time Password (OTP) has been sent to your mobile."),{autoClose:!0}),hideErrorTip(),mdp.hide(),this.showOTPConfirmModal()):alert("Something went wrong")},errorHandler=function(err){err.responseJSON&&err.responseJSON.err&&err.responseJSON.err.detail&&alert(err.responseJSON.err.detail)},opts={async:!1,params:JSON.stringify(param),type:"PUT",success:{handler:successHandler},error:{handler:errorHandler},scope:this};return AJAX_UTIL.send(url,opts),!0},getConfirmedOTP:function(){return this.OTPVerified?this.inputOTP.toString().trim():""},reset:function(){var $container=$(".modalPanelContainer");this.inputVal="",this.inputOTP="",this.OTPVerified="",$container.off("click","#submitOTP, #verifyOTP, #resendOTP"),mdp.hide()}},window.OTPModule=window.OTPModule||new OTPModule}(window,void 0,jQuery,MODAL_PANEL,VIA_VALIDATOR,JS_UTIL);